<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>BookIt</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#050507;
--bg-elevated:#0c0c10;
--bg-card:#121218;
--bg-card-hover:#1a1a22;
--text:#ffffff;
--text-secondary:#8a8a9a;
--text-muted:#55555f;
--gold:#d4af37;
--gold-light:#f4e4bc;
--gold-glow:rgba(212,175,55,0.3);
--platinum:#e5e4e2;
--accent:#9d7cff;
--accent-pink:#ff6b9d;
--success:#00d48a;
--danger:#ff4757;
--border:rgba(255,255,255,0.06);
--border-gold:rgba(212,175,55,0.3);
--gradient-gold:linear-gradient(135deg,#d4af37 0%,#f4e4bc 50%,#d4af37 100%);
--gradient-premium:linear-gradient(135deg,#667eea 0%,#764ba2 50%,#f64f59 100%);
--gradient-dark:linear-gradient(180deg,rgba(255,255,255,0.08) 0%,rgba(255,255,255,0) 100%);
--gradient-shine:linear-gradient(90deg,transparent 0%,rgba(255,255,255,0.1) 50%,transparent 100%);
--shadow-luxury:0 20px 60px rgba(0,0,0,0.6),0 8px 20px rgba(0,0,0,0.4);
--shadow-gold:0 0 40px rgba(212,175,55,0.2),0 0 80px rgba(212,175,55,0.1);
--shadow-inner:inset 0 1px 0 rgba(255,255,255,0.05);
}

body{
font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
background:var(--bg);
background-image:radial-gradient(ellipse at top,rgba(102,126,234,0.08) 0%,transparent 50%),
radial-gradient(ellipse at bottom right,rgba(212,175,55,0.05) 0%,transparent 50%);
color:var(--text);
min-height:100vh;
padding-bottom:120px;
-webkit-font-smoothing:antialiased
}

.page{display:none;animation:luxuryFadeIn 0.5s cubic-bezier(0.4,0,0.2,1)}.page.active{display:block}
@keyframes luxuryFadeIn{from{opacity:0;transform:translateY(20px) scale(0.98)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
@keyframes glow{0%,100%{box-shadow:0 0 20px rgba(212,175,55,0.3)}50%{box-shadow:0 0 40px rgba(212,175,55,0.5)}}
@keyframes borderGlow{0%,100%{border-color:rgba(212,175,55,0.3)}50%{border-color:rgba(212,175,55,0.6)}}

/* === HEADER === */
.header{
padding:20px 24px;
background:linear-gradient(180deg,var(--bg) 0%,transparent 100%);
position:sticky;top:0;z-index:100;
display:flex;justify-content:space-between;align-items:center;
backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px)
}
.header::after{content:'';position:absolute;bottom:0;left:24px;right:24px;height:1px;background:var(--gradient-gold);opacity:0.2}
.header h1{
font-size:26px;font-weight:700;letter-spacing:-0.5px;
background:var(--gradient-gold);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
filter:drop-shadow(0 2px 10px rgba(212,175,55,0.3))
}
.header-back{
background:var(--bg-card);
border:1px solid var(--border);
width:44px;height:44px;border-radius:14px;
font-size:18px;cursor:pointer;color:var(--text);
display:flex;align-items:center;justify-content:center;
transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
box-shadow:var(--shadow-inner)
}
.header-back:hover{background:var(--bg-card-hover);border-color:var(--gold);transform:scale(1.05)}
.header-profile{
background:var(--gradient-gold);
border:none;width:48px;height:48px;border-radius:16px;
font-size:22px;cursor:pointer;
box-shadow:var(--shadow-gold);
transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
animation:glow 3s infinite;
overflow:hidden;
display:flex;align-items:center;justify-content:center
}
.header-profile img{
width:100%;height:100%;object-fit:cover
}
.header-profile:hover{transform:scale(1.1) rotate(5deg)}
.header-menu-btn{
background:transparent;
border:1px solid var(--gold);
padding:12px 20px;border-radius:12px;
font-size:13px;font-weight:600;cursor:pointer;
color:var(--gold);
transition:all 0.3s;
text-transform:uppercase;letter-spacing:1px
}
.header-menu-btn:hover{background:var(--gold);color:var(--bg)}

/* === REGISTER === */
.register-container{padding:80px 28px;text-align:center}
.register-icon{
font-size:100px;margin-bottom:40px;
animation:float 4s ease-in-out infinite;
filter:drop-shadow(0 20px 40px rgba(212,175,55,0.3))
}
.register-title{
font-size:34px;font-weight:700;margin-bottom:16px;letter-spacing:-1px;
background:var(--gradient-gold);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text
}
.register-text{color:var(--text-secondary);margin-bottom:48px;font-size:16px;line-height:1.7}

/* === INPUTS === */
.input-group{margin-bottom:28px;text-align:left}
.input-label{
font-size:11px;font-weight:700;color:var(--gold);
margin-bottom:12px;display:block;
text-transform:uppercase;letter-spacing:1.5px
}
.input-field{
width:100%;padding:20px 24px;font-size:17px;
border:1px solid var(--border);border-radius:18px;
background:var(--bg-card);color:var(--text);
outline:none;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
font-family:inherit;
box-shadow:var(--shadow-inner)
}
.input-field:focus{
border-color:var(--gold);
box-shadow:var(--shadow-gold),var(--shadow-inner);
background:var(--bg-elevated)
}
.input-field::placeholder{color:var(--text-muted)}

/* === BUTTONS === */
.btn-primary{
width:100%;padding:20px;font-size:15px;font-weight:700;
background:var(--gradient-gold);color:var(--bg);
border:none;border-radius:18px;cursor:pointer;
transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
box-shadow:var(--shadow-gold);
font-family:inherit;text-transform:uppercase;letter-spacing:1px;
position:relative;overflow:hidden
}
.btn-primary::before{
content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
background:var(--gradient-shine);
transition:left 0.5s
}
.btn-primary:hover::before{left:100%}
.btn-primary:hover{transform:translateY(-3px);box-shadow:0 15px 50px rgba(212,175,55,0.4)}
.btn-primary:active{transform:translateY(-1px)}
.btn-primary:disabled{opacity:0.3;transform:none;box-shadow:none}

/* === BUSINESS CARDS === */
.businesses-grid{padding:24px;display:flex;flex-direction:column;gap:20px}
.business-card{
border-radius:28px;position:relative;height:180px;
cursor:pointer;overflow:hidden;
transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
box-shadow:var(--shadow-luxury);
border:1px solid var(--border)
}
.business-card::before{
content:'';position:absolute;top:0;left:0;right:0;bottom:0;
background:linear-gradient(180deg,transparent 0%,transparent 40%,rgba(0,0,0,0.9) 100%);
z-index:1
}
.business-card::after{
content:'';position:absolute;top:0;left:0;right:0;height:1px;
background:var(--gradient-gold);opacity:0;
transition:opacity 0.3s
}
.business-card:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 30px 80px rgba(0,0,0,0.7)}
.business-card:hover::after{opacity:0.5}
.business-card-content{position:absolute;bottom:0;left:0;right:0;padding:24px;color:white;z-index:2}
.business-emoji{font-size:44px;margin-bottom:12px;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.3))}
.business-name{font-size:24px;font-weight:700;margin-bottom:6px;letter-spacing:-0.5px}
.business-desc{font-size:14px;opacity:0.8;font-weight:500}

/* === PROFILE === */
.profile-header{
padding:40px 28px;text-align:center;
background:linear-gradient(180deg,var(--bg-elevated) 0%,var(--bg) 100%);
border-bottom:1px solid var(--border);
position:relative
}
.profile-header::before{
content:'';position:absolute;top:0;left:0;right:0;height:200px;
background:radial-gradient(ellipse at center top,rgba(212,175,55,0.1) 0%,transparent 70%);
pointer-events:none
}
.profile-avatar{
width:100px;height:100px;border-radius:50%;
background:var(--gradient-gold);
color:var(--bg);font-size:44px;
display:flex;align-items:center;justify-content:center;
margin:0 auto 20px;
box-shadow:var(--shadow-gold);
border:3px solid var(--bg);
animation:glow 3s infinite;
position:relative
}
.profile-name{font-size:26px;font-weight:700;margin-bottom:8px;letter-spacing:-0.5px}
.profile-phone{color:var(--text-secondary);font-size:15px}

/* === TABS === */
.profile-tabs{
display:flex;padding:12px;margin:20px;
background:var(--bg-card);border-radius:20px;gap:6px;
border:1px solid var(--border)
}
.profile-tab{
flex:1;padding:16px;text-align:center;
font-size:13px;font-weight:600;color:var(--text-muted);
background:transparent;border:none;cursor:pointer;
border-radius:14px;transition:all 0.3s;font-family:inherit;
text-transform:uppercase;letter-spacing:0.5px
}
.profile-tab.active{
color:var(--bg);background:var(--gradient-gold);
box-shadow:var(--shadow-gold)
}

/* === CARDS === */
.profile-content{padding:20px}

/* === THEME SETTINGS === */
.theme-section{
padding:20px;
border-top:1px solid var(--border);
margin-top:20px
}
.theme-section-title{
font-size:14px;font-weight:700;color:var(--gold);
text-transform:uppercase;letter-spacing:1px;
margin-bottom:16px
}
.theme-options{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:12px
}
.theme-btn{
background:var(--bg-card);
border:2px solid var(--border);
border-radius:16px;
padding:12px 8px;
cursor:pointer;
transition:all 0.3s;
display:flex;flex-direction:column;
align-items:center;gap:8px;
font-family:inherit
}
.theme-btn span:last-child{
font-size:11px;font-weight:600;
color:var(--text-secondary)
}
.theme-btn:hover{border-color:var(--gold)}
.theme-btn.active{
border-color:var(--gold);
background:rgba(212,175,55,0.1);
box-shadow:0 0 20px rgba(212,175,55,0.2)
}
.theme-btn.active span:last-child{color:var(--gold)}
.theme-preview{
width:40px;height:40px;border-radius:12px;
border:1px solid rgba(255,255,255,0.1)
}
.dark-preview{background:linear-gradient(135deg,#050507 0%,#121218 100%)}
.light-preview{background:linear-gradient(135deg,#f5f5f7 0%,#ffffff 100%)}
.premium-preview{background:linear-gradient(135deg,#d4af37 0%,#f4e4bc 50%,#d4af37 100%)}
.purple-preview{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
.ocean-preview{background:linear-gradient(135deg,#0077b6 0%,#00b4d8 100%)}
.sunset-preview{background:linear-gradient(135deg,#f72585 0%,#ffd60a 100%)}

/* === THEME VARIABLES === */
[data-theme="light"]{
--bg:#f5f5f7;
--bg-elevated:#ffffff;
--bg-card:#ffffff;
--bg-card-hover:#f0f0f2;
--text:#1a1a1a;
--text-secondary:#666666;
--text-muted:#999999;
--border:rgba(0,0,0,0.1);
--shadow-luxury:0 10px 40px rgba(0,0,0,0.1);
--shadow-inner:0 1px 3px rgba(0,0,0,0.05)
}
[data-theme="premium"]{
--bg:#0a0a0f;
--bg-elevated:#12121a;
--bg-card:#1a1a25;
--bg-card-hover:#252535;
--gold:#ffd700;
--gold-light:#fff4b8;
--gold-glow:rgba(255,215,0,0.4);
--gradient-gold:linear-gradient(135deg,#ffd700 0%,#fff4b8 50%,#ffd700 100%)
}
[data-theme="purple"]{
--bg:#0f0a1a;
--bg-elevated:#1a1025;
--bg-card:#251a35;
--bg-card-hover:#352545;
--gold:#a78bfa;
--gold-light:#c4b5fd;
--gold-glow:rgba(167,139,250,0.4);
--gradient-gold:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
--accent:#a78bfa
}
[data-theme="ocean"]{
--bg:#0a1628;
--bg-elevated:#0d1f3c;
--bg-card:#132744;
--bg-card-hover:#1a3355;
--gold:#00d4ff;
--gold-light:#67e8f9;
--gold-glow:rgba(0,212,255,0.4);
--gradient-gold:linear-gradient(135deg,#0077b6 0%,#00b4d8 100%);
--accent:#00d4ff
}
[data-theme="sunset"]{
--bg:#1a0a14;
--bg-elevated:#2a1020;
--bg-card:#3a1830;
--bg-card-hover:#4a2040;
--gold:#f72585;
--gold-light:#ff85b3;
--gold-glow:rgba(247,37,133,0.4);
--gradient-gold:linear-gradient(135deg,#f72585 0%,#ffd60a 100%);
--accent:#f72585
}

.booking-card{
background:var(--bg-card);border-radius:24px;
padding:22px;margin-bottom:16px;
border:1px solid var(--border);
transition:all 0.3s;
box-shadow:var(--shadow-inner)
}
.booking-card:hover{border-color:rgba(212,175,55,0.2)}
.booking-card.past{opacity:0.4}
.booking-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.booking-date{font-size:18px;font-weight:700}
.booking-status{
font-size:10px;padding:8px 14px;border-radius:30px;
background:var(--success);color:white;
font-weight:700;text-transform:uppercase;letter-spacing:0.5px
}
.booking-status.cancelled{background:var(--danger)}
.booking-status.past{background:var(--text-muted)}
.booking-service{font-size:16px;margin-bottom:8px;font-weight:500}
.booking-master{font-size:14px;color:var(--text-secondary);margin-bottom:16px}
.booking-cancel{
background:transparent;border:1px solid var(--danger);
color:var(--danger);padding:12px 20px;border-radius:14px;
font-size:13px;font-weight:600;cursor:pointer;
transition:all 0.3s;font-family:inherit
}
.booking-cancel:hover{background:var(--danger);color:white}

.empty-state{text-align:center;padding:80px 28px;color:var(--text-muted)}
.empty-state-icon{font-size:80px;margin-bottom:24px;opacity:0.3}

/* === SECTIONS === */
.section-title{
font-size:11px;font-weight:700;color:var(--gold);
padding:24px;text-transform:uppercase;letter-spacing:2px
}

/* === LISTS === */
.branch-list,.category-list,.services-list{padding:0 24px}
.branch-card,.category-card{
background:var(--bg-card);border-radius:22px;
padding:22px;margin-bottom:14px;cursor:pointer;
border:1px solid var(--border);transition:all 0.3s
}
.branch-card:hover,.category-card:hover{border-color:rgba(212,175,55,0.3)}
.branch-card.selected,.category-card.selected{
border-color:var(--gold);
background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,transparent 100%);
box-shadow:var(--shadow-gold)
}
.branch-name{font-size:18px;font-weight:700;margin-bottom:8px}
.branch-address{font-size:14px;color:var(--text-secondary);margin-bottom:4px}
.branch-hours{font-size:13px;color:var(--text-muted)}
.category-card{display:flex;align-items:center;gap:18px}
.category-icon{font-size:36px}
.category-name{font-size:18px;font-weight:600}

/* === DOCTORS / MASTERS === */
.doctors-list,.masters-list{display:flex;gap:14px;padding:0 24px 24px;overflow-x:auto}
.doctor-card,.master-card{
flex-shrink:0;width:140px;padding:22px 16px;
background:var(--bg-card);border-radius:24px;
text-align:center;cursor:pointer;
border:1px solid var(--border);transition:all 0.3s
}
.doctor-card:hover,.master-card:hover{border-color:rgba(212,175,55,0.3)}
.doctor-card.selected,.master-card.selected{
border-color:var(--gold);
background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,transparent 100%)
}
.doctor-avatar,.master-avatar{
width:64px;height:64px;border-radius:50%;
background:var(--gradient-gold);
margin:0 auto 14px;
display:flex;align-items:center;justify-content:center;
font-size:28px;color:var(--bg)
}
.doctor-name,.master-name{font-weight:600;font-size:14px;margin-bottom:6px}
.doctor-specialty{font-size:12px;color:var(--text-secondary);margin-bottom:6px}
.doctor-rating,.master-rating{font-size:12px;color:var(--gold)}

/* === SERVICES === */
.service-item{
display:flex;justify-content:space-between;align-items:center;
padding:20px;background:var(--bg-card);border-radius:18px;
margin-bottom:12px;cursor:pointer;
border:1px solid var(--border);transition:all 0.3s
}
.service-item:hover{border-color:rgba(212,175,55,0.3)}
.service-item.selected{border-color:var(--gold);background:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,transparent 100%)}
.service-info h3{font-size:16px;font-weight:600;margin-bottom:6px}
.service-info span{font-size:13px;color:var(--text-secondary)}
.service-price{font-size:17px;font-weight:700;color:var(--gold)}

/* === DATE / TIME === */
.dates-list{display:flex;gap:12px;padding:24px;overflow-x:auto}
.date-chip{
flex-shrink:0;width:68px;padding:16px 10px;
background:var(--bg-card);border-radius:20px;
text-align:center;cursor:pointer;
border:1px solid var(--border);transition:all 0.3s
}
.date-chip:hover{border-color:rgba(212,175,55,0.3)}
.date-chip.selected{
border-color:var(--gold);background:var(--gradient-gold);color:var(--bg);
box-shadow:var(--shadow-gold)
}
.date-chip.disabled{opacity:0.2;cursor:not-allowed}
.date-chip-day{font-size:22px;font-weight:700}
.date-chip-weekday{font-size:11px;margin-top:6px;font-weight:600;text-transform:uppercase}

.times-list{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:0 24px}
.time-slot{
padding:16px;background:var(--bg-card);border-radius:16px;
text-align:center;font-size:15px;font-weight:600;
cursor:pointer;border:1px solid var(--border);transition:all 0.3s
}
.time-slot:hover{border-color:rgba(212,175,55,0.3)}
.time-slot.selected{
border-color:var(--gold);background:var(--gradient-gold);color:var(--bg);
box-shadow:var(--shadow-gold)
}
.time-slot.disabled{opacity:0.2;cursor:not-allowed}
.no-slots{text-align:center;padding:40px;color:var(--text-muted);font-size:16px}

/* === BOTTOM BUTTON === */
.bottom-btn{
position:fixed;bottom:0;left:0;right:0;
padding:24px;
background:linear-gradient(180deg,transparent 0%,var(--bg) 40%);
backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px)
}
.bottom-btn button{
width:100%;padding:20px;font-size:15px;font-weight:700;
background:var(--gradient-gold);color:var(--bg);
border:none;border-radius:18px;cursor:pointer;
box-shadow:var(--shadow-gold);
transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
font-family:inherit;text-transform:uppercase;letter-spacing:1px
}
.bottom-btn button:hover{transform:translateY(-3px);box-shadow:0 20px 60px rgba(212,175,55,0.4)}
.bottom-btn button:disabled{opacity:0.3;transform:none;box-shadow:none}

/* === SUCCESS === */
.success-container{padding:100px 28px;text-align:center}
.success-icon{font-size:100px;margin-bottom:32px;animation:float 3s ease-in-out infinite}
.success-title{
font-size:32px;font-weight:700;margin-bottom:16px;letter-spacing:-1px;
background:var(--gradient-gold);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text
}
.success-text{font-size:18px;margin-bottom:12px;font-weight:500}
.success-details{color:var(--text-secondary);margin-bottom:24px;font-size:15px;white-space:pre-line;line-height:1.8}

/* === MENU === */
.menu-categories{display:flex;gap:12px;padding:24px;overflow-x:auto}
.menu-chip{
flex-shrink:0;padding:14px 24px;
background:var(--bg-card);border-radius:30px;
font-size:14px;font-weight:600;cursor:pointer;
border:1px solid var(--border);white-space:nowrap;
transition:all 0.3s;color:var(--text);font-family:inherit
}
.menu-chip:hover{border-color:rgba(212,175,55,0.3)}
.menu-chip.active{
background:var(--gradient-gold);border-color:transparent;color:var(--bg);
box-shadow:var(--shadow-gold)
}

.menu-items{padding:0 24px 140px;display:grid;gap:16px}
.menu-item{
display:flex;gap:18px;padding:20px;
background:var(--bg-card);border-radius:24px;
border:1px solid var(--border);transition:all 0.3s
}
.menu-item:hover{border-color:rgba(212,175,55,0.2)}
.menu-item-image{
width:90px;height:90px;border-radius:20px;
display:flex;align-items:center;justify-content:center;
font-size:38px;flex-shrink:0;overflow:hidden
}
.menu-item-image img{
width:100%;height:100%;object-fit:cover
}
.menu-item-info{flex:1;display:flex;flex-direction:column;justify-content:center}
.menu-item-name{font-size:17px;font-weight:600;margin-bottom:6px}
.menu-item-volume{font-size:13px;color:var(--text-secondary);margin-bottom:10px}
.menu-item-price{font-size:18px;font-weight:700;color:var(--gold)}
.menu-item-add{
width:50px;height:50px;border-radius:16px;
background:var(--gradient-gold);color:var(--bg);
border:none;font-size:24px;cursor:pointer;
align-self:center;transition:all 0.3s;
box-shadow:0 4px 16px rgba(212,175,55,0.3)
}
.menu-item-add:hover{transform:scale(1.15);box-shadow:0 8px 24px rgba(212,175,55,0.4)}

/* === CART === */
.cart-fab{
position:fixed;bottom:28px;right:28px;
width:70px;height:70px;border-radius:22px;
background:var(--gradient-gold);color:var(--bg);
border:none;font-size:30px;cursor:pointer;
box-shadow:var(--shadow-gold);
display:none;align-items:center;justify-content:center;
transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
animation:glow 3s infinite
}
.cart-fab.show{display:flex}
.cart-fab:hover{transform:scale(1.1) rotate(5deg)}
.cart-badge{
position:absolute;top:-8px;right:-8px;
background:var(--danger);color:white;
width:28px;height:28px;border-radius:50%;
font-size:12px;font-weight:700;
display:flex;align-items:center;justify-content:center;
border:3px solid var(--bg)
}

.cart-items{padding:24px}
.cart-item{
display:flex;align-items:center;gap:18px;
padding:18px;background:var(--bg-card);
border-radius:20px;margin-bottom:14px;
border:1px solid var(--border)
}
.cart-item-info{flex:1}
.cart-item-name{font-weight:600;margin-bottom:6px;font-size:16px}
.cart-item-price{color:var(--text-secondary);font-size:14px}
.cart-item-controls{display:flex;align-items:center;gap:14px}
.cart-item-controls button{
width:40px;height:40px;border-radius:14px;
border:none;background:var(--gradient-gold);color:var(--bg);
font-size:20px;cursor:pointer;transition:transform 0.2s;font-weight:700
}
.cart-item-controls button:hover{transform:scale(1.15)}
.cart-item-controls span{font-weight:700;font-size:18px;min-width:28px;text-align:center}

.cart-total{padding:24px;border-top:1px solid var(--border)}
.cart-total-row{display:flex;justify-content:space-between;font-size:22px;font-weight:700;margin-bottom:24px}

/* === MODAL === */
.menu-image-modal{
position:fixed;top:0;left:0;right:0;bottom:0;
background:rgba(5,5,7,0.97);z-index:1000;
display:none;flex-direction:column;
backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px)
}
.menu-image-modal.show{display:flex}
.menu-image-header{padding:24px;display:flex;justify-content:space-between;align-items:center;color:white}
.menu-image-close{
background:var(--bg-card);border:1px solid var(--border);
color:white;width:48px;height:48px;border-radius:16px;
font-size:24px;cursor:pointer;
display:flex;align-items:center;justify-content:center
}
.menu-image-nav{display:flex;gap:12px}
.menu-image-nav button{
background:var(--bg-card);border:1px solid var(--border);
color:var(--text);padding:14px 24px;border-radius:14px;
cursor:pointer;font-weight:600;transition:all 0.3s;font-family:inherit
}
.menu-image-nav button:hover{border-color:var(--gold)}
.menu-image-nav button.active{background:var(--gradient-gold);border-color:transparent;color:var(--bg);box-shadow:var(--shadow-gold)}
.menu-image-container{flex:1;overflow:auto;padding:20px}
.menu-image-container img{width:100%;border-radius:20px;box-shadow:var(--shadow-luxury)}

/* Item Modal */
.item-modal{
position:fixed;top:0;left:0;right:0;bottom:0;
background:rgba(0,0,0,0.8);z-index:1000;
display:none;align-items:flex-end;justify-content:center;
backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)
}
.item-modal.show{display:flex}
.item-modal-box{
background:var(--bg-card);
border-radius:28px 28px 0 0;
width:100%;max-width:500px;
max-height:85vh;overflow-y:auto;
padding:24px;position:relative;
border:1px solid var(--border);
border-bottom:none;
animation:slideUp 0.3s ease
}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.item-modal-close{
position:absolute;top:16px;right:16px;
background:var(--bg);border:1px solid var(--border);
color:var(--text);width:36px;height:36px;
border-radius:50%;font-size:18px;cursor:pointer;
display:flex;align-items:center;justify-content:center
}
.item-modal-header{text-align:center;margin-bottom:24px}
.item-modal-icon{
width:80px;height:80px;border-radius:20px;
margin:0 auto 16px;
display:flex;align-items:center;justify-content:center;
font-size:40px;overflow:hidden
}
.item-modal-icon img{
width:100%;height:100%;object-fit:cover
}
.item-modal-name{font-size:22px;font-weight:700}
.item-modal-section{margin-bottom:20px}
.item-modal-label{
font-size:12px;font-weight:700;color:var(--gold);
text-transform:uppercase;letter-spacing:1px;
margin-bottom:12px
}
.item-modal-options{display:flex;flex-wrap:wrap;gap:10px}
.item-modal-options.temp-options{flex-wrap:wrap}
.item-option{
flex:1;min-width:calc(50% - 5px);
padding:14px 12px;
background:var(--bg);border:1px solid var(--border);
border-radius:14px;color:var(--text);
font-size:14px;font-weight:600;cursor:pointer;
transition:all 0.2s;text-align:center;
font-family:inherit
}
.item-option span{display:block;font-size:12px;color:var(--text-secondary);margin-top:4px}
.item-option:hover{border-color:var(--gold)}
.item-option.selected{
border-color:var(--gold);
background:linear-gradient(135deg,rgba(212,175,55,0.15) 0%,transparent 100%);
box-shadow:0 0 20px rgba(212,175,55,0.2)
}
.item-modal-footer{
display:flex;gap:16px;align-items:center;
margin-top:24px;padding-top:20px;
border-top:1px solid var(--border)
}
.item-modal-total{font-size:24px;font-weight:700;color:var(--gold)}
.item-modal-footer .btn-primary{flex:1}
</style>
</head>
<body>
<div id="page-register" class="page">
<div class="register-container">
<div class="register-icon">üì±</div>
<div class="register-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</div>
<div class="register-text">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ –∏ –∑–∞–ø–∏—Å–µ–π</div>
<button class="btn-primary" id="register-btn" onclick="requestPhoneNumber()">üì≤ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º</button>
<div style="margin-top:20px;font-size:13px;color:var(--text-secondary)">–ù–æ–º–µ—Ä –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ –≤–∞—à–µ–≥–æ Telegram</div>
</div>
</div>

<div id="page-home" class="page">
<div class="header"><h1>BookIt</h1><button class="header-profile" id="header-avatar-btn" onclick="openProfile()">üë§</button></div>
<div class="businesses-grid" id="businesses-list"></div>
</div>

<div id="page-profile" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-home')">‚Üê</button><h1>–ü—Ä–æ—Ñ–∏–ª—å</h1><div style="width:40px"></div></div>
<div class="profile-header">
<div class="profile-avatar" id="profile-avatar" onclick="document.getElementById('avatar-input').click()" style="cursor:pointer;overflow:hidden;position:relative">
<span id="avatar-content">üë§</span>
<div style="position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,0.5);font-size:10px;padding:2px 0;color:white">–∏–∑–º–µ–Ω–∏—Ç—å</div>
</div>
<input type="file" id="avatar-input" accept="image/*" style="display:none" onchange="uploadAvatar(this)">
<div class="profile-name" id="profile-name">–ò–º—è</div>
<div class="profile-phone" id="profile-phone">+7</div>
</div>
<div class="profile-tabs">
<button class="profile-tab active" id="tab-bookings" onclick="switchTab('bookings')">–ó–∞–ø–∏—Å–∏</button>
<button class="profile-tab" id="tab-orders" onclick="switchTab('orders')">–ó–∞–∫–∞–∑—ã</button>
<button class="profile-tab" id="tab-reservations" onclick="switchTab('reservations')">–ë—Ä–æ–Ω–∏</button>
</div>
<div class="profile-content" id="profile-content"></div>

<div class="theme-section">
<div class="theme-section-title">üé® –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
<div class="theme-options">
<button class="theme-btn" data-theme="dark" onclick="setTheme('dark')">
<span class="theme-preview dark-preview"></span>
<span>–¢—ë–º–Ω–∞—è</span>
</button>
<button class="theme-btn" data-theme="light" onclick="setTheme('light')">
<span class="theme-preview light-preview"></span>
<span>–°–≤–µ—Ç–ª–∞—è</span>
</button>
<button class="theme-btn" data-theme="premium" onclick="setTheme('premium')">
<span class="theme-preview premium-preview"></span>
<span>–ü—Ä–µ–º–∏—É–º</span>
</button>
<button class="theme-btn" data-theme="purple" onclick="setTheme('purple')">
<span class="theme-preview purple-preview"></span>
<span>–§–∏–æ–ª–µ—Ç</span>
</button>
<button class="theme-btn" data-theme="ocean" onclick="setTheme('ocean')">
<span class="theme-preview ocean-preview"></span>
<span>–û–∫–µ–∞–Ω</span>
</button>
<button class="theme-btn" data-theme="sunset" onclick="setTheme('sunset')">
<span class="theme-preview sunset-preview"></span>
<span>–ó–∞–∫–∞—Ç</span>
</button>
</div>
</div>
</div>

<div id="page-cafe" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-home')">‚Üê</button><h1>Pink Purple</h1><button class="header-menu-btn" onclick="showMenuImages()">üìã –ú–µ–Ω—é</button></div>
<div class="menu-categories" id="menu-categories"></div>
<div class="menu-items" id="menu-items"></div>
<button class="cart-fab" id="cart-fab" onclick="showPage('page-cart')">üõí<span class="cart-badge" id="cart-badge">0</span></button>
</div>

<div id="page-cart" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-cafe')">‚Üê</button><h1>–ö–æ—Ä–∑–∏–Ω–∞</h1><div style="width:40px"></div></div>
<div class="cart-items" id="cart-items"></div>
<div class="section-title">–ö –∫–∞–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å?</div>
<div class="pickup-time-selector">
<select id="pickup-time" class="input-field" style="margin:0 16px 16px;width:calc(100% - 32px)"></select>
</div>
<div class="cart-total">
<div class="cart-total-row"><span>–ò—Ç–æ–≥–æ</span><span id="cart-total">0‚ÇΩ</span></div>
<button class="btn-primary" onclick="submitOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>
</div>

<div id="page-barber" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-home')">‚Üê</button><h1>PORTOS</h1><div style="width:40px"></div></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞</div>
<div class="masters-list" id="masters-list"></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</div>
<div class="services-list" id="barber-services"></div>
<div class="bottom-btn"><button id="barber-next-btn" onclick="goToBarberDateTime()" disabled>–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è</button></div>
</div>

<div id="page-barber-datetime" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-barber')">‚Üê</button><h1>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</h1><div style="width:40px"></div></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</div>
<div class="dates-list" id="barber-dates"></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</div>
<div class="times-list" id="barber-times"></div>
<div class="bottom-btn"><button id="barber-book-btn" onclick="submitBarberBooking()" disabled>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button></div>
</div>

<div id="page-clinic-branches" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-home')">‚Üê</button><h1>–ó–¥–æ—Ä–æ–≤—å–µ —Å–µ–º—å–∏</h1><div style="width:40px"></div></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª</div>
<div class="branch-list" id="branch-list"></div>
</div>

<div id="page-clinic-categories" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-clinic-branches')">‚Üê</button><h1 id="clinic-branch-title">–§–∏–ª–∏–∞–ª</h1><div style="width:40px"></div></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
<div class="category-list" id="category-list"></div>
</div>

<div id="page-clinic-doctor" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-clinic-categories')">‚Üê</button><h1 id="clinic-category-title">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h1><div style="width:40px"></div></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</div>
<div class="services-list" id="clinic-services"></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–∞—á–∞</div>
<div class="doctors-list" id="doctors-list"></div>
<div class="bottom-btn"><button id="clinic-next-btn" onclick="goToClinicDateTime()" disabled>–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è</button></div>
</div>

<div id="page-clinic-datetime" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-clinic-doctor')">‚Üê</button><h1>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</h1><div style="width:40px"></div></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</div>
<div class="dates-list" id="clinic-dates"></div>
<div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</div>
<div id="clinic-times-container"><div class="times-list" id="clinic-times"></div></div>
<div class="bottom-btn"><button id="clinic-book-btn" onclick="submitClinicBooking()" disabled>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button></div>
</div>

<!-- –ß–ï–†–ù–û–í–ê–†: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–∞ -->
<div id="page-chernovar" class="page">
<div class="header"><button class="header-back" onclick="showPage('page-home')">‚Üê</button><h1>–ß–µ—Ä–Ω–æ–≤–∞—Ä</h1><div style="width:40px"></div></div>
<div style="padding:32px 24px;text-align:center;background:linear-gradient(180deg,var(--bg-card) 0%,var(--bg) 100%);border-bottom:1px solid var(--border)">
<div style="font-size:48px;margin-bottom:16px;filter:drop-shadow(0 0 20px rgba(245,158,11,0.4))">üç∫</div>
<div style="font-size:15px;color:var(--text-secondary);margin-bottom:6px">üìç –ü—Ä–æ—Ñ—Å–æ—é–∑–Ω–∞—è 23/12, –ö–∞–∑–∞–Ω—å</div>
<div style="font-size:13px;color:var(--hint)">–í—Å-–ß—Ç: 11:00-00:00 ‚Ä¢ –ü—Ç-–°–±: 11:00-01:00</div>
</div>
<div class="section-title">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–∞</div>
<div style="padding:0 20px">
<div class="input-group">
<label class="input-label">–ù–∞ –∫–∞–∫–æ–µ –∏–º—è?</label>
<input type="text" id="chernovar-name" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" oninput="checkChernovarForm()">
</div>
<div class="input-group">
<label class="input-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π</label>
<select id="chernovar-guests" class="input-field" onchange="checkChernovarForm()">
<option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
<option value="1">1 –≥–æ—Å—Ç—å</option>
<option value="2">2 –≥–æ—Å—Ç—è</option>
<option value="3">3 –≥–æ—Å—Ç—è</option>
<option value="4">4 –≥–æ—Å—Ç—è</option>
<option value="5">5 –≥–æ—Å—Ç–µ–π</option>
<option value="6">6 –≥–æ—Å—Ç–µ–π</option>
<option value="7">7 –≥–æ—Å—Ç–µ–π</option>
<option value="8">8 –≥–æ—Å—Ç–µ–π</option>
<option value="9">9 –≥–æ—Å—Ç–µ–π</option>
<option value="10+">10+ –≥–æ—Å—Ç–µ–π</option>
</select>
</div>
<div class="input-group">
<label class="input-label">–î–∞—Ç–∞</label>
<select id="chernovar-date" class="input-field" onchange="generateChernovarTimes();checkChernovarForm()"></select>
</div>
<div class="input-group">
<label class="input-label">–í—Ä–µ–º—è</label>
<select id="chernovar-time" class="input-field" onchange="checkChernovarForm()"></select>
</div>
<div class="input-group">
<label class="input-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
<input type="text" id="chernovar-comment" class="input-field" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è">
</div>
</div>
<div class="bottom-btn"><button id="chernovar-book-btn" onclick="submitChernovarBooking()" disabled>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button></div>
</div>

<div id="page-success" class="page">
<div class="success-container">
<div class="success-icon" id="success-icon">‚úÖ</div>
<div class="success-title" id="success-title">–ì–æ—Ç–æ–≤–æ!</div>
<div class="success-text" id="success-text"></div>
<div class="success-details" id="success-details"></div>
<br><br>
<button class="btn-primary" onclick="showPage('page-home')">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
</div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –º–µ–Ω—é -->
<div id="menu-image-modal" class="menu-image-modal">
<div class="menu-image-header">
<button class="menu-image-close" onclick="hideMenuImages()">‚úï</button>
<div class="menu-image-nav">
<button id="menu-img-btn-1" class="active" onclick="showMenuPage(1)">–°—Ç—Ä. 1</button>
<button id="menu-img-btn-2" onclick="showMenuPage(2)">–°—Ç—Ä. 2</button>
</div>
</div>
<div class="menu-image-container">
<img id="menu-full-image" src="" alt="–ú–µ–Ω—é Pink Purple">
</div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –æ–ø—Ü–∏–π —Ç–æ–≤–∞—Ä–∞ -->
<div id="item-modal" class="item-modal" onclick="if(event.target===this)closeItemModal()">
<div class="item-modal-box">
<button class="item-modal-close" onclick="closeItemModal()">‚úï</button>
<div id="item-modal-content"></div>
</div>
</div>

<script>
const tg=window.Telegram.WebApp;tg.ready();tg.expand();
if(tg.themeParams.bg_color){document.documentElement.style.setProperty('--bg',tg.themeParams.bg_color);document.documentElement.style.setProperty('--text',tg.themeParams.text_color);document.documentElement.style.setProperty('--hint',tg.themeParams.hint_color);document.documentElement.style.setProperty('--btn',tg.themeParams.button_color);document.documentElement.style.setProperty('--btn-text',tg.themeParams.button_text_color);document.documentElement.style.setProperty('--sec',tg.themeParams.secondary_bg_color)}

const API_URL='https://bookit-api-camelot770.amvera.io';
let user=tg.initDataUnsafe?.user||{id:12345,first_name:'–¢–µ—Å—Ç'};
let userProfile=null,cart=[];

// –ö–∞—Ä—Ç–∏–Ω–∫–∏ –º–µ–Ω—é Pink Purple
const MENU_IMAGES=[
'https://i.imgur.com/Yprglgl.png',
'https://i.imgur.com/H7GdT6l.png'
];

let selectedMaster=null,selectedBarberService=null,selectedBarberDate=null,selectedBarberTime=null;
let barberServices={};
let selectedBranch=null,selectedCategory=null,selectedDoctor=null,selectedClinicService=null,selectedClinicDate=null,selectedClinicTime=null;
let branches=[],clinicServices={},categoryDoctors=[];

const FALLBACK_BRANCHES=[
{id:'branch_central',name:'–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ñ–∏–ª–∏–∞–ª',address:'—É–ª. –õ–µ–Ω–∏–Ω–∞, 42',phone:'+7 (999) 111-22-33',work_hours:'8:00 - 20:00'},
{id:'branch_north',name:'–°–µ–≤–µ—Ä–Ω—ã–π —Ñ–∏–ª–∏–∞–ª',address:'–ø—Ä. –ú–∏—Ä–∞, 128',phone:'+7 (999) 222-33-44',work_hours:'9:00 - 21:00'},
{id:'branch_south',name:'–Æ–∂–Ω—ã–π —Ñ–∏–ª–∏–∞–ª',address:'—É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞, 15',phone:'+7 (999) 333-44-55',work_hours:'8:00 - 19:00'}
];

const FALLBACK_SERVICES={
branch_central:{
therapy:{name:'ü©∫ –¢–µ—Ä–∞–ø–∏—è',specialty:'–¢–µ—Ä–∞–ø–µ–≤—Ç',items:[{id:'consult_therapy',name:'–ü—Ä–∏—ë–º —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞',price:1500,duration:30},{id:'checkup_basic',name:'–ë–∞–∑–æ–≤—ã–π –æ—Å–º–æ—Ç—Ä',price:2000,duration:45}]},
cardio:{name:'‚ù§Ô∏è –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è',specialty:'–ö–∞—Ä–¥–∏–æ–ª–æ–≥',items:[{id:'consult_cardio',name:'–ü—Ä–∏—ë–º –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞',price:2000,duration:40},{id:'ecg',name:'–≠–ö–ì',price:1200,duration:20}]},
neuro:{name:'üß† –ù–µ–≤—Ä–æ–ª–æ–≥–∏—è',specialty:'–ù–µ–≤—Ä–æ–ª–æ–≥',items:[{id:'consult_neuro',name:'–ü—Ä–∏—ë–º –Ω–µ–≤—Ä–æ–ª–æ–≥–∞',price:1800,duration:30}]},
pediatrics:{name:'üë∂ –ü–µ–¥–∏–∞—Ç—Ä–∏—è',specialty:'–ü–µ–¥–∏–∞—Ç—Ä',items:[{id:'consult_child',name:'–ü—Ä–∏—ë–º –ø–µ–¥–∏–∞—Ç—Ä–∞',price:1600,duration:30}]}
},
branch_north:{
therapy:{name:'ü©∫ –¢–µ—Ä–∞–ø–∏—è',specialty:'–¢–µ—Ä–∞–ø–µ–≤—Ç',items:[{id:'consult_therapy',name:'–ü—Ä–∏—ë–º —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞',price:1400,duration:30}]},
gyneco:{name:'üë© –ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è',specialty:'–ì–∏–Ω–µ–∫–æ–ª–æ–≥',items:[{id:'consult_gyn',name:'–ü—Ä–∏—ë–º –≥–∏–Ω–µ–∫–æ–ª–æ–≥–∞',price:2200,duration:40},{id:'uzi_gyn',name:'–£–ó–ò –æ—Ä–≥–∞–Ω–æ–≤ –º–∞–ª–æ–≥–æ —Ç–∞–∑–∞',price:2500,duration:30}]},
surgery:{name:'üî™ –•–∏—Ä—É—Ä–≥–∏—è',specialty:'–•–∏—Ä—É—Ä–≥',items:[{id:'consult_surg',name:'–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Ö–∏—Ä—É—Ä–≥–∞',price:1800,duration:30}]}
},
branch_south:{
therapy:{name:'ü©∫ –¢–µ—Ä–∞–ø–∏—è',specialty:'–¢–µ—Ä–∞–ø–µ–≤—Ç',items:[{id:'consult_therapy',name:'–ü—Ä–∏—ë–º —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞',price:1300,duration:30}]},
derma:{name:'üß¥ –î–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∏—è',specialty:'–î–µ—Ä–º–∞—Ç–æ–ª–æ–≥',items:[{id:'consult_derma',name:'–ü—Ä–∏—ë–º –¥–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∞',price:1700,duration:30}]},
ortho:{name:'ü¶¥ –û—Ä—Ç–æ–ø–µ–¥–∏—è',specialty:'–û—Ä—Ç–æ–ø–µ–¥',items:[{id:'consult_ortho',name:'–ü—Ä–∏—ë–º –æ—Ä—Ç–æ–ø–µ–¥–∞',price:1900,duration:40}]},
eye:{name:'üëÅÔ∏è –û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è',specialty:'–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥',items:[{id:'consult_eye',name:'–ü—Ä–∏—ë–º –æ—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∞',price:1600,duration:30}]}
}
};

const FALLBACK_DOCTORS={
branch_central:[
{id:'doc_ivanov',name:'–ò–≤–∞–Ω–æ–≤ –ê.–ò.',specialty:'–¢–µ—Ä–∞–ø–µ–≤—Ç',experience:'15 –ª–µ—Ç',rating:4.9},
{id:'doc_petrova',name:'–ü–µ—Ç—Ä–æ–≤–∞ –ú.–°.',specialty:'–ö–∞—Ä–¥–∏–æ–ª–æ–≥',experience:'12 –ª–µ—Ç',rating:4.8},
{id:'doc_sidorov',name:'–°–∏–¥–æ—Ä–æ–≤ –ö.–í.',specialty:'–ù–µ–≤—Ä–æ–ª–æ–≥',experience:'10 –ª–µ—Ç',rating:4.7},
{id:'doc_kozlova',name:'–ö–æ–∑–ª–æ–≤–∞ –ï.–ê.',specialty:'–ü–µ–¥–∏–∞—Ç—Ä',experience:'8 –ª–µ—Ç',rating:4.9}
],
branch_north:[
{id:'doc_smirnov',name:'–°–º–∏—Ä–Ω–æ–≤ –î.–ü.',specialty:'–¢–µ—Ä–∞–ø–µ–≤—Ç',experience:'20 –ª–µ—Ç',rating:4.9},
{id:'doc_volkova',name:'–í–æ–ª–∫–æ–≤–∞ –ò.–ù.',specialty:'–ì–∏–Ω–µ–∫–æ–ª–æ–≥',experience:'14 –ª–µ—Ç',rating:4.8},
{id:'doc_morozov',name:'–ú–æ—Ä–æ–∑–æ–≤ –ê.–°.',specialty:'–•–∏—Ä—É—Ä–≥',experience:'18 –ª–µ—Ç',rating:4.9}
],
branch_south:[
{id:'doc_novikov',name:'–ù–æ–≤–∏–∫–æ–≤ –ü.–ê.',specialty:'–¢–µ—Ä–∞–ø–µ–≤—Ç',experience:'11 –ª–µ—Ç',rating:4.7},
{id:'doc_fedorova',name:'–§—ë–¥–æ—Ä–æ–≤–∞ –û.–í.',specialty:'–î–µ—Ä–º–∞—Ç–æ–ª–æ–≥',experience:'9 –ª–µ—Ç',rating:4.8},
{id:'doc_alexeev',name:'–ê–ª–µ–∫—Å–µ–µ–≤ –í.–ú.',specialty:'–û—Ä—Ç–æ–ø–µ–¥',experience:'16 –ª–µ—Ç',rating:4.9},
{id:'doc_egorova',name:'–ï–≥–æ—Ä–æ–≤–∞ –¢.–°.',specialty:'–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥',experience:'7 –ª–µ—Ç',rating:4.6}
]
};

function showPage(id){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(id).classList.add('active');if(id==='page-cart')renderCart();try{tg.HapticFeedback.impactOccurred('light')}catch(e){}}

// –ú–æ–¥–∞–ª–∫–∞ –º–µ–Ω—é
function showMenuImages(){document.getElementById('menu-image-modal').classList.add('show');showMenuPage(1)}
function hideMenuImages(){document.getElementById('menu-image-modal').classList.remove('show')}
function showMenuPage(n){
document.getElementById('menu-img-btn-1').classList.toggle('active',n===1);
document.getElementById('menu-img-btn-2').classList.toggle('active',n===2);
document.getElementById('menu-full-image').src=MENU_IMAGES[n-1];
}

// === THEMES ===
function setTheme(theme){
document.documentElement.setAttribute('data-theme',theme);
localStorage.setItem('app_theme',theme);
document.querySelectorAll('.theme-btn').forEach(b=>b.classList.remove('active'));
const btn=document.querySelector('.theme-btn[data-theme="'+theme+'"]');
if(btn)btn.classList.add('active');
try{tg.HapticFeedback.selectionChanged()}catch(e){}
}

function loadTheme(){
const saved=localStorage.getItem('app_theme')||'dark';
document.documentElement.setAttribute('data-theme',saved);
document.querySelectorAll('.theme-btn').forEach(b=>{
b.classList.toggle('active',b.getAttribute('data-theme')===saved);
});
}

async function checkRegistration(){
try{const r=await fetch(API_URL+'/api/user/'+user.id+'/profile');const d=await r.json();if(d.registered){userProfile=d;loadBusinesses();showPage('page-home');loadHeaderAvatar();loadTheme()}else{showPage('page-register')}}catch(e){userProfile={phone:'',first_name:user.first_name};loadBusinesses();showPage('page-home');loadHeaderAvatar();loadTheme()}
}

function loadHeaderAvatar(){
const saved=localStorage.getItem('avatar_'+user.id);
const headerBtn=document.getElementById('header-avatar-btn');
if(saved && headerBtn){headerBtn.innerHTML='<img src="'+saved+'">';}
}

function requestPhoneNumber(){
// –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç —á–µ—Ä–µ–∑ Telegram WebApp
try{
tg.requestContact(async function(sent, event){
if(sent && event && event.responseUnsafe && event.responseUnsafe.contact){
const contact = event.responseUnsafe.contact;
const phone = contact.phone_number;
// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
try{await fetch(API_URL+'/api/user/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,phone:phone,first_name:user.first_name,username:user.username})})}catch(e){}
userProfile={phone:phone,first_name:user.first_name};
loadBusinesses();
showPage('page-home');
try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}
}else{
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–∞–ª - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É
showManualPhoneInput();
}
});
}catch(e){
// requestContact –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä—É—á–Ω–æ–π –≤–≤–æ–¥
showManualPhoneInput();
}
}

function showManualPhoneInput(){
document.querySelector('.register-container').innerHTML=`
<div class="register-icon">üì±</div>
<div class="register-title">–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä</div>
<div class="register-text">–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤—Ä—É—á–Ω—É—é</div>
<div class="input-group">
<label class="input-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
<input type="tel" id="phone-input" class="input-field" placeholder="+7 (999) 123-45-67" oninput="validatePhone()">
</div>
<button class="btn-primary" id="register-btn" onclick="registerManual()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
`;
}

function validatePhone(){const p=document.getElementById('phone-input').value.replace(/\D/g,'');document.getElementById('register-btn').disabled=p.length<10}

async function registerManual(){
const phone=document.getElementById('phone-input').value;
try{await fetch(API_URL+'/api/user/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,phone:phone,first_name:user.first_name,username:user.username})})}catch(e){}
userProfile={phone:phone,first_name:user.first_name};loadBusinesses();showPage('page-home');try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}
}

function loadBusinesses(){
const b=[
{id:'pink_purple',name:'Pink Purple',desc:'–°–º—É–∑–∏, –º–∏–ª–∫–∏, –≤–∞—Ñ–ª–∏',emoji:'üçπ',grad:'linear-gradient(135deg,#9C27B0,#E91E63)'},
{id:'portos',name:'PORTOS',desc:'–ú—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏',emoji:'üíà',grad:'linear-gradient(135deg,#1a1a2e,#16213e)'},
{id:'clinic',name:'–ó–¥–æ—Ä–æ–≤—å–µ —Å–µ–º—å–∏',desc:'–°–µ—Ç—å –∫–ª–∏–Ω–∏–∫',emoji:'üè•',grad:'linear-gradient(135deg,#00b894,#00cec9)'},
{id:'chernovar',name:'–ß–µ—Ä–Ω–æ–≤–∞—Ä',desc:'–†–µ—Å—Ç–æ—Ä–∞–Ω ‚Ä¢ –ë—Ä–æ–Ω—å —Å—Ç–æ–ª–∏–∫–æ–≤',emoji:'üç∫',grad:'linear-gradient(135deg,#2c1810,#5d4037)'}
];
document.getElementById('businesses-list').innerHTML=b.map(x=>'<div class="business-card" onclick="openBusiness(\''+x.id+'\')" style="background:'+x.grad+'"><div class="business-card-content"><div class="business-emoji">'+x.emoji+'</div><div class="business-name">'+x.name+'</div><div class="business-desc">'+x.desc+'</div></div></div>').join('');
}

function openBusiness(id){
if(id==='pink_purple'){loadCafeMenu();showPage('page-cafe')}
else if(id==='portos'){loadBarberData();showPage('page-barber')}
else if(id==='clinic'){loadClinicBranches();showPage('page-clinic-branches')}
else if(id==='chernovar'){showPage('page-chernovar')}
}

function openProfile(){
document.getElementById('profile-name').textContent=userProfile?.first_name||user.first_name||'–ì–æ—Å—Ç—å';
document.getElementById('profile-phone').textContent=userProfile?.phone||'';
loadAvatar();
switchTab('bookings');
showPage('page-profile');
}

function loadAvatar(){
const saved=localStorage.getItem('avatar_'+user.id);
const container=document.getElementById('avatar-content');
const headerBtn=document.getElementById('header-avatar-btn');
if(saved){
container.innerHTML='<img src="'+saved+'" style="width:100%;height:100%;object-fit:cover">';
if(headerBtn)headerBtn.innerHTML='<img src="'+saved+'">';
}else{
container.innerHTML='üë§';
if(headerBtn)headerBtn.innerHTML='üë§';
}
}

function uploadAvatar(input){
const file=input.files[0];
if(!file)return;
if(file.size>2*1024*1024){alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å 2MB)');return}
const reader=new FileReader();
reader.onload=function(e){
const dataUrl=e.target.result;
localStorage.setItem('avatar_'+user.id,dataUrl);
loadAvatar();
try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}
};
reader.readAsDataURL(file);
}
function switchTab(t){document.querySelectorAll('.profile-tab').forEach(x=>x.classList.remove('active'));document.getElementById('tab-'+t).classList.add('active');if(t==='bookings')loadUserBookings();else if(t==='orders')loadUserOrders();else if(t==='reservations')loadUserReservations()}

async function loadUserBookings(){
const c=document.getElementById('profile-content');
try{const r=await fetch(API_URL+'/api/user/'+user.id+'/bookings');const b=await r.json();
if(!b.length){c.innerHTML='<div class="empty-state"><div class="empty-state-icon">üìÖ</div><div>–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</div></div>';return}
c.innerHTML=b.map(x=>{const d=new Date(x.date).toLocaleDateString('ru-RU',{day:'numeric',month:'long'});const sc=x.status==='cancelled'?'cancelled':(x.is_past?'past':'');const st=x.status==='cancelled'?'–û—Ç–º–µ–Ω–µ–Ω–∞':(x.is_past?'–ó–∞–≤–µ—Ä—à–µ–Ω–∞':'–ê–∫—Ç–∏–≤–Ω–∞');const icon=x.business_id==='clinic'?'üë®‚Äç‚öïÔ∏è':'üë®‚Äçü¶±';return'<div class="booking-card '+(x.is_past?'past':'')+'"><div class="booking-header"><div class="booking-date">'+d+', '+x.time+'</div><div class="booking-status '+sc+'">'+st+'</div></div><div class="booking-service">'+x.service_name+'</div><div class="booking-master">'+icon+' '+x.master_name+'</div>'+(!x.is_past&&x.status!=='cancelled'?'<button class="booking-cancel" onclick="cancelBooking(\''+x.booking_id+'\')">–û—Ç–º–µ–Ω–∏—Ç—å</button>':'')+'</div>'}).join('')}catch(e){c.innerHTML='<div class="empty-state"><div class="empty-state-icon">üìÖ</div><div>–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</div></div>'}
}

async function loadUserOrders(){
const c=document.getElementById('profile-content');
try{const r=await fetch(API_URL+'/api/user/'+user.id+'/orders');const o=await r.json();
if(!o.length){c.innerHTML='<div class="empty-state"><div class="empty-state-icon">üõí</div><div>–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</div></div>';return}
c.innerHTML=o.map(x=>{
const d=new Date(x.created_at).toLocaleDateString('ru-RU',{day:'numeric',month:'long',hour:'2-digit',minute:'2-digit'});
const pickup=x.pickup_time?'–ö '+x.pickup_time:'';
const sc=x.status==='cancelled'?'cancelled':'';
const st=x.status==='cancelled'?'–û—Ç–º–µ–Ω—ë–Ω':(x.status==='completed'?'–í—ã–ø–æ–ª–Ω–µ–Ω':'–ù–æ–≤—ã–π');
const canCancel=x.status==='new';
return'<div class="booking-card"><div class="booking-header"><div class="booking-date">'+d+'</div><div class="booking-status '+sc+'">'+st+'</div></div><div class="booking-service">'+x.items.map(i=>i.name).join(', ')+'</div><div class="booking-master">üí∞ '+x.total+'‚ÇΩ'+(pickup?' ‚Ä¢ ‚è∞ '+pickup:'')+'</div>'+(canCancel?'<button class="booking-cancel" onclick="cancelOrder(\''+x.order_id+'\')">–û—Ç–º–µ–Ω–∏—Ç—å</button>':'')+'</div>'
}).join('')}catch(e){c.innerHTML='<div class="empty-state"><div class="empty-state-icon">üõí</div><div>–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</div></div>'}
}

async function cancelOrder(id){if(!confirm('–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑?'))return;try{await fetch(API_URL+'/api/orders/'+id+'/cancel?user_id='+user.id,{method:'POST'});try{tg.HapticFeedback.notificationOccurred('success')}catch(e){};loadUserOrders()}catch(e){alert('–û—à–∏–±–∫–∞')}}

async function cancelBooking(id){if(!confirm('–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å?'))return;try{await fetch(API_URL+'/api/bookings/'+id+'/cancel?user_id='+user.id,{method:'POST'});try{tg.HapticFeedback.notificationOccurred('success')}catch(e){};loadUserBookings()}catch(e){alert('–û—à–∏–±–∫–∞')}}

async function loadUserReservations(){
const c=document.getElementById('profile-content');
try{const r=await fetch(API_URL+'/api/user/'+user.id+'/reservations');const res=await r.json();
if(!res.length){c.innerHTML='<div class="empty-state"><div class="empty-state-icon">üçΩÔ∏è</div><div>–ù–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div></div>';return}
c.innerHTML=res.map(x=>{
const d=new Date(x.date).toLocaleDateString('ru-RU',{day:'numeric',month:'long'});
const sc=x.status==='cancelled'?'cancelled':(x.is_past?'past':'');
const st=x.status==='cancelled'?'–û—Ç–º–µ–Ω–µ–Ω–∞':(x.is_past?'–ü—Ä–æ—à–ª–∞':'–ê–∫—Ç–∏–≤–Ω–∞');
const canCancel=!x.is_past&&x.status!=='cancelled';
return'<div class="booking-card '+(x.is_past?'past':'')+'"><div class="booking-header"><div class="booking-date">'+d+', '+x.time+'</div><div class="booking-status '+sc+'">'+st+'</div></div><div class="booking-service">üç∫ –ß–µ—Ä–Ω–æ–≤–∞—Ä ‚Ä¢ '+x.guests+' –≥–æ—Å—Ç–µ–π</div><div class="booking-master">üë§ –ù–∞ –∏–º—è: '+x.guest_name+'</div>'+(canCancel?'<button class="booking-cancel" onclick="cancelReservation(\''+x.reservation_id+'\')">–û—Ç–º–µ–Ω–∏—Ç—å</button>':'')+'</div>'
}).join('')}catch(e){c.innerHTML='<div class="empty-state"><div class="empty-state-icon">üçΩÔ∏è</div><div>–ù–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div></div>'}
}

async function cancelReservation(id){if(!confirm('–û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω—å?'))return;try{await fetch(API_URL+'/api/reservations/'+id+'/cancel?user_id='+user.id,{method:'POST'});try{tg.HapticFeedback.notificationOccurred('success')}catch(e){};loadUserReservations()}catch(e){alert('–û—à–∏–±–∫–∞')}}

// === CAFE - –ü–û–õ–ù–û–ï –ú–ï–ù–Æ PINK PURPLE ===
let currentMenu={};
function loadCafeMenu(){
currentMenu={
top:{name:'üî• –ù–∞—à —Ç–æ–ø',items:[
{id:'top_pink_matcha',name:'–ü–∏–Ω–∫ –ú–∞—Ç—á–∞',e:'üçµ',img:'top_pink_matcha.jpg',bg:'linear-gradient(135deg,#a8e6cf,#dcedc1)',sizes:[{vol:'400–º–ª',price:409},{vol:'500–º–ª',price:459},{vol:'650–º–ª',price:509}]},
{id:'top_pina_colada',name:'–ü–∏–Ω–∞ –ö–æ–ª–∞–¥–∞',e:'ü••',img:'top_pina_colada.jpg',bg:'linear-gradient(135deg,#ffecd2,#fcb69f)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}]},
{id:'top_coco_pink',name:'–ö–æ–∫–æ –ü–∏–Ω–∫',e:'ü••',img:'top_coco_pink.jpg',bg:'linear-gradient(135deg,#fbc2eb,#a6c1ee)',sizes:[{vol:'500–º–ª',price:499},{vol:'650–º–ª',price:549}]},
{id:'top_dubai_choco',name:'–î—É–±–∞–π—Å–∫–∏–π —à–æ–∫–æ–ª–∞–¥',e:'üç´',img:'top_dubai_choco.jpg',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'500–º–ª',price:599},{vol:'650–º–ª',price:649}],hasTemp:true},
{id:'top_dubai_chill',name:'–î—É–±–∞–π –ß–∏–ª–ª',e:'‚ùÑÔ∏è',img:'top_dubai_chill.jpg',bg:'linear-gradient(135deg,#667eea,#764ba2)',sizes:[{vol:'500–º–ª',price:599},{vol:'650–º–ª',price:649}]}
]},
freeze:{name:'üßä –§—Ä–∏–∑—ã',items:[
{id:'freeze_oreo',name:'–®–æ–∫–æ–ª–∞–¥ –û—Ä–µ–æ',e:'üç™',img:'freeze_oreo.jpg',bg:'linear-gradient(135deg,#232526,#414345)',sizes:[{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}]},
{id:'freeze_mango',name:'–ú–∞–Ω–≥–æ',e:'ü•≠',img:'freeze_mango.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}]},
{id:'freeze_cherry',name:'–í–∏—à–Ω—è',e:'üçí',img:'freeze_cherry.jpg',bg:'linear-gradient(135deg,#c31432,#240b36)',sizes:[{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}]},
{id:'freeze_strawberry',name:'–ö–ª—É–±–Ω–∏–∫–∞',e:'üçì',img:'freeze_strawberry.jpg',bg:'linear-gradient(135deg,#ff416c,#ff4b2b)',sizes:[{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}]},
{id:'freeze_grape',name:'–í–∏–Ω–æ–≥—Ä–∞–¥',e:'üçá',img:'freeze_grape.jpg',bg:'linear-gradient(135deg,#8e2de2,#4a00e0)',sizes:[{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}]},
{id:'freeze_blueberry',name:'–ß–µ—Ä–Ω–∏–∫–∞',e:'ü´ê',img:'freeze_blueberry.jpg',bg:'linear-gradient(135deg,#4776e6,#8e54e9)',sizes:[{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}]}
]},
milkshake:{name:'ü•§ –ú–∏–ª–∫—à–µ–π–∫–∏',items:[
{id:'shake_classic',name:'–ö–ª–∞—Å—Å–∏–∫–∞',e:'ü•õ',img:'shake_classic.jpg',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'500–º–ª',price:449}]},
{id:'shake_choco',name:'–®–æ–∫–æ–ª–∞–¥',e:'üç´',img:'shake_choco.jpg',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'500–º–ª',price:449}]},
{id:'shake_strawberry',name:'–ö–ª—É–±–Ω–∏–∫–∞',e:'üçì',img:'shake_strawberry.jpg',bg:'linear-gradient(135deg,#ff416c,#ff4b2b)',sizes:[{vol:'500–º–ª',price:449}]},
{id:'shake_caramel',name:'–ö–∞—Ä–∞–º–µ–ª—å',e:'üçØ',img:'shake_caramel.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'500–º–ª',price:449}]},
{id:'shake_blueberry',name:'–ß–µ—Ä–Ω–∏–∫–∞',e:'ü´ê',img:'shake_blueberry.jpg',bg:'linear-gradient(135deg,#4776e6,#8e54e9)',sizes:[{vol:'500–º–ª',price:449}]},
{id:'shake_coffee',name:'–ö–æ—Ñ–µ–π–Ω—ã–π',e:'‚òï',img:'shake_coffee.jpg',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'500–º–ª',price:449}]}
]},
sparkly:{name:'‚ú® –°–ø–∞—Ä–∫–ª—ã',items:[
{id:'sparkle_mango_ginger',name:'–ú–∞–Ω–≥–æ-–ò–º–±–∏—Ä—å',e:'ü•≠',img:'sparkle_mango_ginger.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'500–º–ª',price:349}]},
{id:'sparkle_pineapple_lychee',name:'–ê–Ω–∞–Ω–∞—Å-–õ–∏—á–∏',e:'üçç',img:'sparkle_pineapple_lychee.jpg',bg:'linear-gradient(135deg,#ffecd2,#fcb69f)',sizes:[{vol:'500–º–ª',price:349}]},
{id:'sparkle_apple_lime',name:'–Ø–±–ª–æ–∫–æ-–õ–∏–º–æ–Ω-–õ–∞–π–º',e:'üçè',img:'sparkle_apple_lime.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'500–º–ª',price:349}]},
{id:'sparkle_mint_raspberry',name:'–ú—è—Ç–∞-–ú–∞–ª–∏–Ω–∞',e:'üåø',img:'sparkle_mint_raspberry.jpg',bg:'linear-gradient(135deg,#11998e,#38ef7d)',sizes:[{vol:'500–º–ª',price:349}]},
{id:'sparkle_kiwi_lime',name:'–ö–∏–≤–∏-–õ–∞–π–º',e:'ü•ù',img:'sparkle_kiwi_lime.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'500–º–ª',price:349}]},
{id:'sparkle_lime_curacao',name:'–õ–∞–π–º-–ö—é—Ä–∞—Å–∞–æ',e:'üçã',img:'sparkle_lime_curacao.jpg',bg:'linear-gradient(135deg,#11998e,#38ef7d)',sizes:[{vol:'500–º–ª',price:349}]},
{id:'sparkle_citrus',name:'–¶–∏—Ç—Ä—É—Å',e:'üçä',img:'sparkle_citrus.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'500–º–ª',price:349}]}
]},
bloom:{name:'üå∏ –ë–ª—É–º—ã',items:[
{id:'bloom_kiwi_maracuya',name:'–ö–∏–≤–∏ –ú–∞—Ä–∞–∫—É–π—è –ë–ª—É–º',e:'ü•ù',img:'bloom_kiwi_maracuya.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'400–º–ª',price:349},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:false},
{id:'bloom_mango_maracuya',name:'–ú–∞–Ω–≥–æ –ú–∞—Ä–∞–∫—É–π—è –ë–ª—É–º',e:'ü•≠',img:'bloom_mango_maracuya.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'400–º–ª',price:399},{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}],hasTemp:true,hasJuiceball:false},
{id:'bloom_cherry_pomegranate',name:'–í–∏—à–Ω—è –ì—Ä–∞–Ω–∞—Ç –ë–ª—É–º',e:'üçí',img:'bloom_cherry_pomegranate.jpg',bg:'linear-gradient(135deg,#8e0e00,#1f1c18)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true},
{id:'bloom_blueberry_lavender',name:'–ß–µ—Ä–Ω–∏–∫–∞ –õ–∞–≤–∞–Ω–¥–∞ –ë–ª—É–º',e:'ü´ê',img:'bloom_blueberry_lavender.jpg',bg:'linear-gradient(135deg,#4776e6,#8e54e9)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true},
{id:'bloom_guava_cherry',name:'–ì—É–∞–≤–∞ –í–∏—à–Ω—è –ë–ª—É–º',e:'üçí',img:'bloom_guava_cherry.jpg',bg:'linear-gradient(135deg,#ff416c,#ff4b2b)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true},
{id:'bloom_peach',name:'–ü–µ—Ä—Å–∏–∫–æ–≤—ã–π –ë–ª—É–º',e:'üçë',img:'bloom_peach.jpg',bg:'linear-gradient(135deg,#ffecd2,#fcb69f)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true},
{id:'bloom_strawberry_maracuya',name:'–ö–ª—É–±–Ω–∏–∫–∞ –ú–∞—Ä–∞–∫—É–π—è –ë–ª—É–º',e:'üçì',img:'bloom_strawberry_maracuya.jpg',bg:'linear-gradient(135deg,#ff416c,#ff4b2b)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true},
{id:'bloom_raspberry',name:'–ú–∞–ª–∏–Ω–∞ –ë–ª—É–º',e:'ü´ê',img:'bloom_raspberry.jpg',bg:'linear-gradient(135deg,#c31432,#240b36)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true},
{id:'bloom_strawberry_yuzu',name:'–ö–ª—É–±–Ω–∏–∫–∞ –Æ–¥–∑—É –ë–ª—É–º',e:'üçì',img:'bloom_strawberry_yuzu.jpg',bg:'linear-gradient(135deg,#ff416c,#ff4b2b)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true,hasJuiceball:true}
]},
smoothie:{name:'ü•§ –°–º—É–∑–∏',items:[
{id:'smoothie_berry',name:'–Ø–≥–æ–¥–Ω—ã–π —Å–º—É–∑–∏',e:'üçì',img:'smoothie_berry.jpg',bg:'linear-gradient(135deg,#ff6b6b,#c44569)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_kiwi_cucumber',name:'–ö–∏–≤–∏-–û–≥—É—Ä–µ—Ü',e:'ü•ù',img:'smoothie_kiwi_cucumber.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_mango_banana',name:'–ú–∞–Ω–≥–æ-–ë–∞–Ω–∞–Ω',e:'ü•≠',img:'smoothie_mango_banana.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_cherry_cacao',name:'–í–∏—à–Ω—è-–ö–∞–∫–∞–æ',e:'üçí',img:'smoothie_cherry_cacao.jpg',bg:'linear-gradient(135deg,#8e2de2,#4a00e0)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_strawberry_banana',name:'–ö–ª—É–±–Ω–∏–∫–∞-–ë–∞–Ω–∞–Ω',e:'üçì',img:'smoothie_strawberry_banana.jpg',bg:'linear-gradient(135deg,#ff416c,#ff4b2b)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_cucumber_mint',name:'–û–≥—É—Ä–µ—Ü-–ú—è—Ç–∞',e:'ü•í',img:'smoothie_cucumber_mint.jpg',bg:'linear-gradient(135deg,#11998e,#38ef7d)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_blueberry_banana',name:'–ß–µ—Ä–Ω–∏–∫–∞-–ë–∞–Ω–∞–Ω',e:'ü´ê',img:'smoothie_blueberry_banana.jpg',bg:'linear-gradient(135deg,#4776e6,#8e54e9)',sizes:[{vol:'500–º–ª',price:489}]},
{id:'smoothie_raspberry_apple',name:'–ú–∞–ª–∏–Ω–∞-–Ø–±–ª–æ–∫–æ',e:'üçé',img:'smoothie_raspberry_apple.jpg',bg:'linear-gradient(135deg,#eb3349,#f45c43)',sizes:[{vol:'500–º–ª',price:489}]}
]},
milky:{name:'ü•õ –ú–∏–ª–∫–∏',items:[
{id:'milk_original',name:'–ú–∏–ª–∫ –û—Ä–∏–¥–∂–∏–Ω–∞–ª',e:'üßã',img:'milk_original.jpg',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'400–º–ª',price:329},{vol:'500–º–ª',price:379},{vol:'650–º–ª',price:429}],hasTemp:true},
{id:'milk_minty',name:'–ú–∏–Ω—Ç–∏ –ú–∏–ª–∫',e:'üåø',img:'milk_minty.jpg',bg:'linear-gradient(135deg,#11998e,#38ef7d)',sizes:[{vol:'400–º–ª',price:349},{vol:'500–º–ª',price:399},{vol:'650–º–ª',price:449}],hasTemp:true},
{id:'milk_green',name:'–ì—Ä–∏–Ω –ú–∏–ª–∫',e:'üçµ',img:'milk_green.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'400–º–ª',price:429},{vol:'500–º–ª',price:479},{vol:'650–º–ª',price:529}],hasTemp:true},
{id:'milk_caramel',name:'–ö–∞—Ä–∞–º–µ–ª—å –ú–∏–ª–∫',e:'üçØ',img:'milk_caramel.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'400–º–ª',price:399},{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}],hasTemp:true},
{id:'milk_purple',name:'–ü–µ—Ä–ø–ª –ú–∏–ª–∫',e:'üçá',img:'milk_purple.jpg',bg:'linear-gradient(135deg,#8e2de2,#4a00e0)',sizes:[{vol:'400–º–ª',price:399},{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}],hasTemp:true},
{id:'milk_pink',name:'–ü–∏–Ω–∫ –ú–∏–ª–∫',e:'üå∏',img:'milk_pink.jpg',bg:'linear-gradient(135deg,#fbc2eb,#a6c1ee)',sizes:[{vol:'400–º–ª',price:399},{vol:'500–º–ª',price:449},{vol:'650–º–ª',price:499}],hasTemp:true},
{id:'milk_taro',name:'–¢–∞—Ä–æ –ú–∏–ª–∫',e:'üç†',img:'milk_taro.jpg',bg:'linear-gradient(135deg,#8e2de2,#4a00e0)',sizes:[{vol:'400–º–ª',price:409},{vol:'500–º–ª',price:459},{vol:'650–º–ª',price:509}],hasTemp:true},
{id:'milk_banana',name:'–ë–∞–Ω–∞–Ω–∞ –ú–∏–ª–∫',e:'üçå',img:'milk_banana.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'400–º–ª',price:409},{vol:'500–º–ª',price:459},{vol:'650–º–ª',price:509}],hasTemp:true},
{id:'milk_coco',name:'–ö–æ–∫–æ –ú–∏–ª–∫',e:'ü••',img:'milk_coco.jpg',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'400–º–ª',price:409},{vol:'500–º–ª',price:459},{vol:'650–º–ª',price:509}],hasTemp:true}
]},
coffee:{name:'‚òï –ö–æ—Ñ–µ',items:[
{id:'coffee_ice_latte',name:'–ê–π—Å –õ–∞—Ç—Ç–µ',e:'üßä',img:'coffee_ice_latte.jpg',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'500–º–ª',price:389}]},
{id:'coffee_cream',name:'–°–ª–∏–≤–æ—á–Ω—ã–π –ª–∞—Ç—Ç–µ',e:'ü•õ',img:'coffee_cream.jpg',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'500–º–ª',price:429}]},
{id:'coffee_matcha',name:'–ú–∞—Ç—á–∞ –ª–∞—Ç—Ç–µ',e:'üçµ',img:'coffee_matcha.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'500–º–ª',price:429}],hasTemp:true},
{id:'coffee_pistachio',name:'–§–∏—Å—Ç–∞—à–∫–æ–≤—ã–π –ª–∞—Ç—Ç–µ',e:'ü•ú',img:'coffee_pistachio.jpg',bg:'linear-gradient(135deg,#56ab2f,#a8e063)',sizes:[{vol:'500–º–ª',price:449}],hasTemp:true},
{id:'coffee_banana_caramel',name:'–ë–∞–Ω–∞–Ω–æ–≤–æ-–∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–π –ª–∞—Ç—Ç–µ',e:'üçå',img:'coffee_banana_caramel.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'400–º–ª',price:389}],hasTemp:true},
{id:'coffee_cappuccino',name:'–ö–∞–ø—É—á–∏–Ω–æ',e:'‚òï',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'300–º–ª',price:249}]},
{id:'coffee_latte',name:'–õ–∞—Ç—Ç–µ',e:'‚òï',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'300–º–ª',price:249}]},
{id:'coffee_raf',name:'–†–∞—Ñ',e:'‚òï',bg:'linear-gradient(135deg,#ffecd2,#fcb69f)',sizes:[{vol:'300–º–ª',price:249}]},
{id:'coffee_espresso',name:'–≠—Å–ø—Ä–µ—Å—Å–æ',e:'‚òï',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'50–º–ª',price:190}]},
{id:'coffee_americano',name:'–ê–º–µ—Ä–∏–∫–∞–Ω–æ',e:'‚òï',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'200–º–ª',price:190}]}
]},
waffles:{name:'üßá –í–∞—Ñ–ª–∏',items:[
{id:'waffle_choco_mix',name:'–®–æ–∫–æ–ª–∞–¥–Ω—ã–π –ú–∏–∫—Å',e:'üç´',img:'waffle_choco_mix.jpg',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'',price:489}]},
{id:'waffle_chicken',name:'–í–∞—Ñ–ª—è —Å –∫—É—Ä–∏—Ü–µ–π',e:'üçó',img:'waffle_chicken.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'',price:489}]},
{id:'waffle_choco_oreo',name:'–®–æ–∫–æ–ª–∞–¥–Ω—ã–π –û—Ä–µ–æ',e:'üç™',img:'waffle_choco_oreo.jpg',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'',price:509}]},
{id:'waffle_pink_purple',name:'–ü–∏–Ω–∫ –ü–µ—Ä–ø–ª',e:'üå∏',img:'waffle_pink_purple.jpg',bg:'linear-gradient(135deg,#fbc2eb,#a6c1ee)',sizes:[{vol:'',price:449}]},
{id:'waffle_banana_nutella',name:'–ë–∞–Ω–∞–Ω –ù—É—Ç–µ–ª–ª–∞',e:'üçå',img:'waffle_banana_nutella.jpg',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'',price:449}]}
]},
extra:{name:'‚ûï –î–æ–ø—ã',items:[
{id:'extra_tapioca',name:'–¢–∞–ø–∏–æ–∫–∞',e:'‚ö´',bg:'linear-gradient(135deg,#232526,#414345)',sizes:[{vol:'',price:79}]},
{id:'extra_espresso',name:'–®–æ—Ç —ç—Å–ø—Ä–µ—Å—Å–æ',e:'‚òï',bg:'linear-gradient(135deg,#3a1c71,#d76d77)',sizes:[{vol:'',price:89}]},
{id:'extra_syrup',name:'–°–∏—Ä–æ–ø',e:'üçØ',bg:'linear-gradient(135deg,#f7971e,#ffd200)',sizes:[{vol:'',price:30}]},
{id:'extra_cream_cap',name:'–°—ã—Ä–Ω–∞—è —à–∞–ø–∫–∞',e:'üßÄ',bg:'linear-gradient(135deg,#ffecd2,#fcb69f)',sizes:[{vol:'',price:99}]},
{id:'extra_coconut_jelly',name:'–ö–æ–∫–æ—Å–æ–≤–æ–µ –∂–µ–ª–µ',e:'ü••',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'',price:79}]},
{id:'extra_alt_milk',name:'–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –º–æ–ª–æ–∫–æ',e:'ü•õ',bg:'linear-gradient(135deg,#c9d6ff,#e2e2e2)',sizes:[{vol:'',price:90}]}
]}
};
const c=Object.entries(currentMenu);
document.getElementById('menu-categories').innerHTML=c.map(([k,v],i)=>'<button class="menu-chip '+(i===0?'active':'')+'" onclick="selectMenuCat(\''+k+'\',this)">'+v.name+'</button>').join('');
renderMenu('top');
}

let selectedItem=null;
const juiceballFlavors=['–ú–∞—Ä–∞–∫—É–π—è','–õ–∏—á–∏','–ú–∞–Ω–≥–æ','–ö–ª—É–±–Ω–∏–∫–∞'];
const tempOptions=['üßä –°–æ –ª—å–¥–æ–º','‚ùÑÔ∏è –•–æ–ª–æ–¥–Ω—ã–π –±–µ–∑ –ª—å–¥–∞','üå°Ô∏è –ö–æ–º–Ω–∞—Ç–Ω–∞—è','‚òï –¢—ë–ø–ª—ã–π'];

function selectMenuCat(k,el){document.querySelectorAll('.menu-chip').forEach(x=>x.classList.remove('active'));el.classList.add('active');renderMenu(k)}

let menuItemsData={};

function renderMenu(k){
menuItemsData={};
document.getElementById('menu-items').innerHTML=currentMenu[k].items.map((x,idx)=>{
const minPrice=Math.min(...x.sizes.map(s=>s.price));
const maxPrice=Math.max(...x.sizes.map(s=>s.price));
const priceText=minPrice===maxPrice?minPrice+'‚ÇΩ':'–æ—Ç '+minPrice+'‚ÇΩ';
const volText=x.sizes.length>1?x.sizes.map(s=>s.vol).join(' / '):x.sizes[0].vol;
const itemKey=k+'_'+idx;
menuItemsData[itemKey]=x;
const imgContent=x.img?'<img src="'+x.img+'" alt="'+x.name+'">':x.e;
return '<div class="menu-item"><div class="menu-item-image" style="background:'+x.bg+'">'+imgContent+'</div><div class="menu-item-info"><div class="menu-item-name">'+x.name+'</div>'+(volText?'<div class="menu-item-volume">'+volText+'</div>':'')+'<div class="menu-item-price">'+priceText+'</div></div><button class="menu-item-add" onclick="openItemModal(\''+itemKey+'\')">+</button></div>'
}).join('')
}

function openItemModal(key){
const item=menuItemsData[key];
if(!item)return;
selectedItem=item;
const hasSizes=item.sizes.length>1;
const hasTemp=item.hasTemp||false;
const hasJuiceball=item.hasJuiceball||false;

const iconContent=item.img?'<img src="'+item.img+'" alt="'+item.name+'">':item.e;
let html='<div class="item-modal-header"><div class="item-modal-icon" style="background:'+item.bg+'">'+iconContent+'</div><div class="item-modal-name">'+item.name+'</div></div>';

// –†–∞–∑–º–µ—Ä—ã
if(hasSizes){
html+='<div class="item-modal-section"><div class="item-modal-label">–†–∞–∑–º–µ—Ä</div><div class="item-modal-options" id="size-options">';
item.sizes.forEach((s,i)=>{
html+='<button class="item-option '+(i===0?'selected':'')+'" onclick="selectSize('+i+','+s.price+')" data-idx="'+i+'">'+s.vol+'<span>'+s.price+'‚ÇΩ</span></button>';
});
html+='</div></div>';
}

// –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –±–ª—É–º–æ–≤
if(hasTemp){
html+='<div class="item-modal-section"><div class="item-modal-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</div><div class="item-modal-options temp-options" id="temp-options">';
tempOptions.forEach((t,i)=>{
html+='<button class="item-option '+(i===0?'selected':'')+'" onclick="selectTemp('+i+')" data-idx="'+i+'">'+t+'</button>';
});
html+='</div></div>';
}

// –î–∂—É—Å–±–æ–ª –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –±–ª—É–º–æ–≤ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
if(hasJuiceball){
html+='<div class="item-modal-section"><div class="item-modal-label">–î–∂—É—Å–±–æ–ª <span style="color:var(--success);font-size:12px">–±–µ—Å–ø–ª–∞—Ç–Ω–æ</span></div><div class="item-modal-options" id="juiceball-options">';
html+='<button class="item-option selected" onclick="selectJuiceball(-1)" data-idx="-1">–ë–µ–∑ –¥–∂—É—Å–±–æ–ª–∞</button>';
juiceballFlavors.forEach((j,i)=>{
html+='<button class="item-option" onclick="selectJuiceball('+i+')" data-idx="'+i+'">'+j+'</button>';
});
html+='</div></div>';
}

html+='<div class="item-modal-footer"><div class="item-modal-total" id="modal-total">'+item.sizes[0].price+'‚ÇΩ</div><button class="btn-primary" onclick="addItemToCart()">–î–æ–±–∞–≤–∏—Ç—å</button></div>';

document.getElementById('item-modal-content').innerHTML=html;
document.getElementById('item-modal').classList.add('show');

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä
selectedItem._selectedSize=0;
selectedItem._selectedPrice=item.sizes[0].price;
selectedItem._selectedTemp=0;
selectedItem._selectedJuiceball=-1;
}

function selectSize(idx,price){
document.querySelectorAll('#size-options .item-option').forEach(b=>b.classList.remove('selected'));
document.querySelector('#size-options .item-option[data-idx="'+idx+'"]').classList.add('selected');
selectedItem._selectedSize=idx;
selectedItem._selectedPrice=price;
document.getElementById('modal-total').textContent=price+'‚ÇΩ';
}

function selectTemp(idx){
document.querySelectorAll('#temp-options .item-option').forEach(b=>b.classList.remove('selected'));
document.querySelector('#temp-options .item-option[data-idx="'+idx+'"]').classList.add('selected');
selectedItem._selectedTemp=idx;
}

function selectJuiceball(idx){
document.querySelectorAll('#juiceball-options .item-option').forEach(b=>b.classList.remove('selected'));
document.querySelector('#juiceball-options .item-option[data-idx="'+idx+'"]').classList.add('selected');
selectedItem._selectedJuiceball=idx;
}

function closeItemModal(){document.getElementById('item-modal').classList.remove('show')}

function addItemToCart(){
const item=selectedItem;
const size=item.sizes[item._selectedSize];
let name=item.name;
if(item.sizes.length>1)name+=' '+size.vol;
if(item.hasTemp)name+=' ('+tempOptions[item._selectedTemp].replace(/[üßä‚ùÑÔ∏èüå°Ô∏è‚òï]\s*/,'')+')';
if(item._selectedJuiceball>=0)name+=' +'+juiceballFlavors[item._selectedJuiceball];

const cartId=item.id+'_'+item._selectedSize+'_'+(item._selectedTemp||0)+'_'+(item._selectedJuiceball||-1);
const existing=cart.find(x=>x.id===cartId);
if(existing)existing.qty++;
else cart.push({id:cartId,name:name,price:item._selectedPrice,qty:1});

updateBadge();
closeItemModal();
try{tg.HapticFeedback.impactOccurred('medium')}catch(e){}
}

function addToCart(id,name,price){const e=cart.find(x=>x.id===id);if(e)e.qty++;else cart.push({id,name,price,qty:1});updateBadge();try{tg.HapticFeedback.impactOccurred('medium')}catch(e){}}
function updateBadge(){const t=cart.reduce((s,x)=>s+x.qty,0);document.getElementById('cart-badge').textContent=t;document.getElementById('cart-fab').classList.toggle('show',t>0)}
function renderCart(){
document.getElementById('cart-items').innerHTML=cart.map(x=>'<div class="cart-item"><div class="cart-item-info"><div class="cart-item-name">'+x.name+'</div><div class="cart-item-price">'+x.price+'‚ÇΩ</div></div><div class="cart-item-controls"><button onclick="changeQty(\''+x.id+'\',-1)">‚àí</button><span>'+x.qty+'</span><button onclick="changeQty(\''+x.id+'\',1)">+</button></div></div>').join('');
document.getElementById('cart-total').textContent=cart.reduce((s,x)=>s+x.price*x.qty,0)+'‚ÇΩ';
generatePickupTimes();
}
function generatePickupTimes(){
const sel=document.getElementById('pickup-time');
const now=new Date();
const opts=['<option value="">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>'];
for(let h=10;h<22;h++){
for(let m=0;m<60;m+=5){
const t=(h<10?'0':'')+h+':'+(m<10?'0':'')+m;
const slotDate=new Date();slotDate.setHours(h,m,0,0);
if(slotDate>now){opts.push('<option value="'+t+'">'+t+'</option>')}
}}
sel.innerHTML=opts.join('');
}
function changeQty(id,d){const x=cart.find(i=>i.id===id);if(x){x.qty+=d;if(x.qty<=0)cart=cart.filter(i=>i.id!==id)}renderCart();updateBadge()}
async function submitOrder(){
const t=cart.reduce((s,x)=>s+x.price*x.qty,0);
const pickupTime=document.getElementById('pickup-time').value;
try{const r=await fetch(API_URL+'/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,username:user.username,first_name:user.first_name,business_id:'pink_purple',items:cart,total:t,phone:userProfile?.phone,pickup_time:pickupTime})});
const d=await r.json();
document.getElementById('success-icon').textContent='‚úÖ';
document.getElementById('success-title').textContent='–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!';
document.getElementById('success-text').textContent='#'+d.order_id;
document.getElementById('success-details').textContent='–°—É–º–º–∞: '+t+'‚ÇΩ'+(pickupTime?'\n–ö –≤—Ä–µ–º–µ–Ω–∏: '+pickupTime:'');
cart=[];updateBadge();showPage('page-success');
try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}}catch(e){alert('–û—à–∏–±–∫–∞')}
}

// === BARBER ===
let masters=[];
function loadBarberData(){masters=[{id:'artem',name:'–ê—Ä—Ç—ë–º',r:4.9},{id:'dmitry',name:'–î–º–∏—Ç—Ä–∏–π',r:4.8},{id:'rustam',name:'–†—É—Å—Ç–∞–º',r:4.9},{id:'vlad',name:'–í–ª–∞–¥–∏—Å–ª–∞–≤',r:4.7}];barberServices={haircut:{name:'‚úÇÔ∏è –°—Ç—Ä–∏–∂–∫–∏',items:[{id:'mens',name:'–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞',price:1200,dur:45},{id:'kids',name:'–î–µ—Ç—Å–∫–∞—è',price:800,dur:30}]},beard:{name:'üßî –ë–æ—Ä–æ–¥–∞',items:[{id:'trim',name:'–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ',price:700,dur:30}]},combo:{name:'üéØ –ö–æ–º–±–æ',items:[{id:'full',name:'–°—Ç—Ä–∏–∂–∫–∞+–ë–æ—Ä–æ–¥–∞',price:1700,dur:75}]}};renderMasters();renderBarberServices()}
function renderMasters(){document.getElementById('masters-list').innerHTML=masters.map(m=>'<div class="master-card '+(selectedMaster?.id===m.id?'selected':'')+'" onclick="selectMaster(\''+m.id+'\')"><div class="master-avatar">üíà</div><div class="master-name">'+m.name+'</div><div class="master-rating">‚≠ê '+m.r+'</div></div>').join('')}
function selectMaster(id){selectedMaster=masters.find(m=>m.id===id);renderMasters();updateBarberBtn();try{tg.HapticFeedback.selectionChanged()}catch(e){}}
function renderBarberServices(){let h='';for(const[k,v]of Object.entries(barberServices)){h+=v.items.map(s=>'<div class="service-item '+(selectedBarberService?.id===s.id?'selected':'')+'" onclick="selectBarberSvc(\''+k+'\',\''+s.id+'\')"><div class="service-info"><h3>'+s.name+'</h3><span>'+s.dur+' –º–∏–Ω</span></div><div class="service-price">'+s.price+'‚ÇΩ</div></div>').join('')}document.getElementById('barber-services').innerHTML=h}
function selectBarberSvc(k,id){selectedBarberService=barberServices[k].items.find(s=>s.id===id);renderBarberServices();updateBarberBtn();try{tg.HapticFeedback.selectionChanged()}catch(e){}}
function updateBarberBtn(){document.getElementById('barber-next-btn').disabled=!(selectedMaster&&selectedBarberService)}
async function goToBarberDateTime(){selectedBarberDate=null;selectedBarberTime=null;await renderBarberDates();showPage('page-barber-datetime')}
async function renderBarberDates(){const dates=[];const wd=['–í—Å','–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±'];const t=new Date();for(let i=0;i<14;i++){const d=new Date(t);d.setDate(t.getDate()+i);dates.push({date:d.toISOString().split('T')[0],day:d.getDate(),wd:wd[d.getDay()],today:i===0})}document.getElementById('barber-dates').innerHTML=dates.map(d=>'<div class="date-chip '+(selectedBarberDate===d.date?'selected':'')+'" onclick="selectBarberDate(\''+d.date+'\')"><div class="date-chip-day">'+d.day+'</div><div class="date-chip-weekday">'+(d.today?'–°–µ–≥–æ–¥–Ω—è':d.wd)+'</div></div>').join('');if(!selectedBarberDate)selectBarberDate(dates[0].date)}
async function selectBarberDate(d){selectedBarberDate=d;selectedBarberTime=null;document.getElementById('barber-book-btn').disabled=true;renderBarberDates();await loadBarberSlots();try{tg.HapticFeedback.selectionChanged()}catch(e){}}
async function loadBarberSlots(){const all=['10:00','10:30','11:00','11:30','12:00','12:30','13:00','13:30','14:00','14:30','15:00','15:30','16:00','16:30','17:00','17:30','18:00','18:30','19:00','19:30','20:00'];let av=all;try{const r=await fetch(API_URL+'/api/portos/slots/'+selectedMaster.id+'/'+selectedBarberDate);if(r.ok){const d=await r.json();av=d.slots||all}}catch(e){}if(av.length===0){document.getElementById('barber-times').innerHTML='<div class="no-slots">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</div>';return}document.getElementById('barber-times').innerHTML=av.map(s=>'<div class="time-slot '+(selectedBarberTime===s?'selected':'')+'" onclick="selectBarberTime(\''+s+'\')">'+s+'</div>').join('')}
function selectBarberTime(t){selectedBarberTime=t;loadBarberSlots();document.getElementById('barber-book-btn').disabled=false;try{tg.HapticFeedback.selectionChanged()}catch(e){}}
async function submitBarberBooking(){if(!selectedMaster||!selectedBarberService||!selectedBarberDate||!selectedBarberTime)return;try{await fetch(API_URL+'/api/bookings',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,username:user.username,first_name:user.first_name,business_id:'portos',service_id:selectedBarberService.id,service_name:selectedBarberService.name,service_price:selectedBarberService.price,master_id:selectedMaster.id,master_name:selectedMaster.name,date:selectedBarberDate,time:selectedBarberTime,phone:userProfile?.phone})});const dd=new Date(selectedBarberDate).toLocaleDateString('ru-RU',{day:'numeric',month:'long'});document.getElementById('success-icon').textContent='üíà';document.getElementById('success-title').textContent='–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã!';document.getElementById('success-text').textContent=selectedBarberService.name+' —É '+selectedMaster.name;document.getElementById('success-details').textContent=dd+' –≤ '+selectedBarberTime;selectedMaster=null;selectedBarberService=null;selectedBarberDate=null;selectedBarberTime=null;showPage('page-success');try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}}catch(e){alert('–û—à–∏–±–∫–∞')}}

// === CLINIC ===
async function loadClinicBranches(){try{const r=await fetch(API_URL+'/api/clinic/branches');if(r.ok){branches=await r.json()}else{branches=FALLBACK_BRANCHES}}catch(e){branches=FALLBACK_BRANCHES}renderBranches()}
function renderBranches(){document.getElementById('branch-list').innerHTML=branches.map(b=>'<div class="branch-card" onclick="selectBranch(\''+b.id+'\')"><div class="branch-name">'+b.name+'</div><div class="branch-address">üìç '+b.address+'</div><div class="branch-hours">üïê '+b.work_hours+'</div></div>').join('')}
async function selectBranch(id){selectedBranch=branches.find(b=>b.id===id);selectedCategory=null;selectedDoctor=null;selectedClinicService=null;document.getElementById('clinic-branch-title').textContent=selectedBranch.name;await loadBranchServices();showPage('page-clinic-categories');try{tg.HapticFeedback.selectionChanged()}catch(e){}}
async function loadBranchServices(){try{const r=await fetch(API_URL+'/api/clinic/branch/'+selectedBranch.id+'/services');if(r.ok){clinicServices=await r.json()}else{clinicServices=FALLBACK_SERVICES[selectedBranch.id]||{}}}catch(e){clinicServices=FALLBACK_SERVICES[selectedBranch.id]||{}}renderCategories()}
function renderCategories(){const cats=Object.entries(clinicServices);document.getElementById('category-list').innerHTML=cats.map(([k,v])=>'<div class="category-card" onclick="selectCategory(\''+k+'\')"><div class="category-icon">'+v.name.split(' ')[0]+'</div><div class="category-name">'+v.name.substring(v.name.indexOf(' ')+1)+'</div></div>').join('')}
async function selectCategory(catKey){selectedCategory=clinicServices[catKey];selectedDoctor=null;selectedClinicService=null;document.getElementById('clinic-category-title').textContent=selectedCategory.name;await loadCategoryDoctors();renderClinicServices();renderDoctors();showPage('page-clinic-doctor');try{tg.HapticFeedback.selectionChanged()}catch(e){}}
async function loadCategoryDoctors(){const specialty=selectedCategory.specialty;try{const r=await fetch(API_URL+'/api/clinic/branch/'+selectedBranch.id+'/doctors?specialty='+encodeURIComponent(specialty));if(r.ok){categoryDoctors=await r.json()}else{const all=FALLBACK_DOCTORS[selectedBranch.id]||[];categoryDoctors=all.filter(d=>d.specialty===specialty)}}catch(e){const all=FALLBACK_DOCTORS[selectedBranch.id]||[];categoryDoctors=all.filter(d=>d.specialty===specialty)}}
function renderClinicServices(){document.getElementById('clinic-services').innerHTML=selectedCategory.items.map(s=>'<div class="service-item '+(selectedClinicService?.id===s.id?'selected':'')+'" onclick="selectClinicService(\''+s.id+'\')"><div class="service-info"><h3>'+s.name+'</h3><span>'+s.duration+' –º–∏–Ω</span></div><div class="service-price">'+s.price+'‚ÇΩ</div></div>').join('')}
function selectClinicService(id){selectedClinicService=selectedCategory.items.find(s=>s.id===id);renderClinicServices();updateClinicBtn();try{tg.HapticFeedback.selectionChanged()}catch(e){}}
function renderDoctors(){document.getElementById('doctors-list').innerHTML=categoryDoctors.map(d=>'<div class="doctor-card '+(selectedDoctor?.id===d.id?'selected':'')+'" onclick="selectDoctor(\''+d.id+'\')"><div class="doctor-avatar">üë®‚Äç‚öïÔ∏è</div><div class="doctor-name">'+d.name+'</div><div class="doctor-specialty">'+d.experience+'</div><div class="doctor-rating">‚≠ê '+d.rating+'</div></div>').join('')}
function selectDoctor(id){selectedDoctor=categoryDoctors.find(d=>d.id===id);renderDoctors();updateClinicBtn();try{tg.HapticFeedback.selectionChanged()}catch(e){}}
function updateClinicBtn(){document.getElementById('clinic-next-btn').disabled=!(selectedDoctor&&selectedClinicService)}
async function goToClinicDateTime(){selectedClinicDate=null;selectedClinicTime=null;await renderClinicDates();showPage('page-clinic-datetime')}
async function renderClinicDates(){const dates=[];const wd=['–í—Å','–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±'];const t=new Date();for(let i=0;i<14;i++){const d=new Date(t);d.setDate(t.getDate()+i);dates.push({date:d.toISOString().split('T')[0],day:d.getDate(),wd:wd[d.getDay()],today:i===0})}document.getElementById('clinic-dates').innerHTML=dates.map(d=>'<div class="date-chip '+(selectedClinicDate===d.date?'selected':'')+'" onclick="selectClinicDate(\''+d.date+'\')"><div class="date-chip-day">'+d.day+'</div><div class="date-chip-weekday">'+(d.today?'–°–µ–≥–æ–¥–Ω—è':d.wd)+'</div></div>').join('');if(!selectedClinicDate)selectClinicDate(dates[0].date)}
async function selectClinicDate(d){selectedClinicDate=d;selectedClinicTime=null;document.getElementById('clinic-book-btn').disabled=true;renderClinicDates();await loadClinicSlots();try{tg.HapticFeedback.selectionChanged()}catch(e){}}
async function loadClinicSlots(){const all=['09:00','09:30','10:00','10:30','11:00','11:30','12:00','12:30','13:00','13:30','14:00','14:30','15:00','15:30','16:00','16:30','17:00','17:30','18:00','18:30','19:00'];let av=all;try{const r=await fetch(API_URL+'/api/clinic/slots/'+selectedBranch.id+'/'+selectedDoctor.id+'/'+selectedClinicDate);if(r.ok){const d=await r.json();av=d.slots||all}}catch(e){}const container=document.getElementById('clinic-times-container');if(av.length===0){container.innerHTML='<div class="no-slots">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</div>';return}container.innerHTML='<div class="times-list" id="clinic-times">'+av.map(s=>'<div class="time-slot '+(selectedClinicTime===s?'selected':'')+'" onclick="selectClinicTime(\''+s+'\')">'+s+'</div>').join('')+'</div>'}
function selectClinicTime(t){selectedClinicTime=t;loadClinicSlots();document.getElementById('clinic-book-btn').disabled=false;try{tg.HapticFeedback.selectionChanged()}catch(e){}}
async function submitClinicBooking(){if(!selectedBranch||!selectedDoctor||!selectedClinicService||!selectedClinicDate||!selectedClinicTime)return;try{await fetch(API_URL+'/api/bookings',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,username:user.username,first_name:user.first_name,business_id:'clinic',branch_id:selectedBranch.id,service_id:selectedClinicService.id,service_name:selectedClinicService.name,service_price:selectedClinicService.price,master_id:selectedDoctor.id,master_name:selectedDoctor.name,date:selectedClinicDate,time:selectedClinicTime,phone:userProfile?.phone})});const dd=new Date(selectedClinicDate).toLocaleDateString('ru-RU',{day:'numeric',month:'long'});document.getElementById('success-icon').textContent='üè•';document.getElementById('success-title').textContent='–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã!';document.getElementById('success-text').textContent=selectedClinicService.name;document.getElementById('success-details').textContent='–í—Ä–∞—á: '+selectedDoctor.name+'\n'+selectedBranch.name+'\n'+dd+' –≤ '+selectedClinicTime;selectedBranch=null;selectedCategory=null;selectedDoctor=null;selectedClinicService=null;selectedClinicDate=null;selectedClinicTime=null;showPage('page-success');try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}}catch(e){alert('–û—à–∏–±–∫–∞')}}

// === –ß–ï–†–ù–û–í–ê–† ===
function initChernovar(){
generateChernovarDates();
generateChernovarTimes();
document.getElementById('chernovar-name').value=userProfile?.first_name||user.first_name||'';
checkChernovarForm();
}

function generateChernovarDates(){
const sel=document.getElementById('chernovar-date');
const wd=['–í—Å','–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±'];
const opts=[];
const today=new Date();
for(let i=0;i<14;i++){
const d=new Date(today);d.setDate(today.getDate()+i);
const dateStr=d.toISOString().split('T')[0];
const dayNum=d.getDate();
const monthNames=['—è–Ω–≤','—Ñ–µ–≤','–º–∞—Ä','–∞–ø—Ä','–º–∞–π','–∏—é–Ω','–∏—é–ª','–∞–≤–≥','—Å–µ–Ω','–æ–∫—Ç','–Ω–æ—è','–¥–µ–∫'];
const display=dayNum+' '+monthNames[d.getMonth()]+' ('+wd[d.getDay()]+')';
opts.push('<option value="'+dateStr+'" data-day="'+d.getDay()+'">'+display+'</option>');
}
sel.innerHTML=opts.join('');
}

function generateChernovarTimes(){
const sel=document.getElementById('chernovar-time');
const dateInput=document.getElementById('chernovar-date');
const selectedDate=dateInput.value;
const selectedOption=dateInput.options[dateInput.selectedIndex];
const dayOfWeek=parseInt(selectedOption?.dataset.day||new Date().getDay());

// –ü—Ç(5) –∏ –°–±(6): 11:00-01:00, –∏–Ω–∞—á–µ 11:00-00:00
// –ë—Ä–æ–Ω—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–∞ 2 —á–∞—Å–∞ –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
const isFriSat=(dayOfWeek===5||dayOfWeek===6);
const lastBookingHour=isFriSat?23:22; // –ü—Ç-–°–± –¥–æ 23:00, –í—Å-–ß—Ç –¥–æ 22:00

const opts=['<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>'];
const now=new Date();
const today=now.toISOString().split('T')[0];
const currentHour=now.getHours();
const currentMin=now.getMinutes();

for(let h=11;h<=lastBookingHour;h++){
for(let m=0;m<60;m+=30){
if(h===lastBookingHour&&m>0)continue; // –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ—Ç —Ä–æ–≤–Ω–æ –≤ lastBookingHour:00
const t=(h<10?'0':'')+h+':'+(m<10?'0':'')+m;
// –î–ª—è —Å–µ–≥–æ–¥–Ω—è - —Ç–æ–ª—å–∫–æ –±—É–¥—É—â–µ–µ –≤—Ä–µ–º—è
if(selectedDate===today){
if(h<currentHour||(h===currentHour&&m<=currentMin))continue;
}
opts.push('<option value="'+t+'">'+t+'</option>');
}
}
sel.innerHTML=opts.join('');
}

function checkChernovarForm(){
const name=document.getElementById('chernovar-name').value.trim();
const guests=document.getElementById('chernovar-guests').value;
const date=document.getElementById('chernovar-date').value;
const time=document.getElementById('chernovar-time').value;
document.getElementById('chernovar-book-btn').disabled=!(name&&guests&&date&&time);
}

async function submitChernovarBooking(){
const name=document.getElementById('chernovar-name').value.trim();
const guests=document.getElementById('chernovar-guests').value;
const date=document.getElementById('chernovar-date').value;
const time=document.getElementById('chernovar-time').value;
const comment=document.getElementById('chernovar-comment').value.trim();

try{
const r=await fetch(API_URL+'/api/reservations',{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
user_id:user.id,
username:user.username,
first_name:user.first_name,
business_id:'chernovar',
guest_name:name,
guests:guests,
date:date,
time:time,
comment:comment,
phone:userProfile?.phone
})
});
const d=await r.json();
const dd=new Date(date).toLocaleDateString('ru-RU',{day:'numeric',month:'long'});
document.getElementById('success-icon').textContent='üç∫';
document.getElementById('success-title').textContent='–°—Ç–æ–ª–∏–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω!';
document.getElementById('success-text').textContent='–ù–∞ –∏–º—è: '+name;
document.getElementById('success-details').textContent=dd+' –≤ '+time+'\n–ì–æ—Å—Ç–µ–π: '+guests+'\n–ß–µ—Ä–Ω–æ–≤–∞—Ä, –ü—Ä–æ—Ñ—Å–æ—é–∑–Ω–∞—è 23/12';
showPage('page-success');
try{tg.HapticFeedback.notificationOccurred('success')}catch(e){}
}catch(e){alert('–û—à–∏–±–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è')}
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const origShowPage=showPage;
showPage=function(id){
origShowPage(id);
if(id==='page-chernovar')initChernovar();
};

checkRegistration();
</script>
</body>
</html>
